var z=Object.defineProperty;var B=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var O=(e,l,o)=>l in e?z(e,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[l]=o,g=(e,l)=>{for(var o in l||(l={}))G.call(l,o)&&O(e,o,l[o]);if(B)for(var o of B(l))q.call(l,o)&&O(e,o,l[o]);return e};import{j as D,a as R,aw as b,aB as J,aE as K,$ as Q,b as W,d as X,D as Y,aG as Z,ac as ee,c as te,n as se,_ as d,k as f,l as y,V as m,O as H,m as C,F as ne,a3 as oe,I as _,U as F,x as le,M as S,S as T}from"./vue.1658457169439.js";import{T as ie,u as w,a8 as ae,_ as N}from"./index.1658457169439.js";import{A as re}from"./aside.1658457169439.js";import{H as ue,M as ce}from"./main.1658457169439.js";import"./logo-mini.1658457169439.js";import"./sortable.esm.1658457169439.js";import"./parent.1658457169439.js";const de=D({name:"layoutColumnsAside",setup(){const e=R([]),l=R(),{proxy:o}=te(),p=ie(),M=w(),{routesList:k,isColumnsMenuHover:h,isColumnsNavHover:A}=b(p),{themeConfig:n}=b(M),r=J(),c=K(),s=Q({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),$=t=>{s.liIndex=t,l.value.style.top=`${e.value[t].offsetTop+s.difference}px`},P=(t,i)=>{$(i);let{path:a,redirect:u}=t;u?c.push(u):c.push(a)},x=(t,i)=>{let{path:a}=t;s.liOldPath=a,s.liOldIndex=i,s.liHoverIndex=i,o.mittBus.emit("setSendColumnsChildren",v(a)),p.setColumnsMenuHover(!1),p.setColumnsNavHover(!0)},V=async()=>{await p.setColumnsNavHover(!1),setTimeout(()=>{!h&&!A&&o.mittBus.emit("restoreDefault")},100)},I=t=>{se(()=>{$(t)})},j=()=>{s.columnsAsideList=L(k.value);const t=v(r.path);if(Object.keys(t).length<=0)return!1;I(t.item[0].k),o.mittBus.emit("setSendColumnsChildren",t)},v=t=>{const i=t.split("/");let a={};return s.columnsAsideList.map((u,E)=>{u.path===`/${i[1]}`&&(u.k=E,a.item=[g({},u)],a.children=[g({},u)],u.children&&(a.children=u.children))}),a},L=t=>t.filter(i=>!i.meta.isHide).map(i=>(i=Object.assign({},i),i.children&&(i.children=L(i.children)),i)),U=t=>{s.routeSplit=t.split("/"),s.routeSplit.shift();const i=`/${s.routeSplit[0]}`,a=s.columnsAsideList.find(u=>u.path===i);if(!a)return!1;setTimeout(()=>{I(a.k)},0)};return W(ae.state,t=>{if(t.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?s.difference=3:s.difference=0,!t.routesList.isColumnsMenuHover&&!t.routesList.isColumnsNavHover)s.liHoverIndex=null,o.mittBus.emit("setSendColumnsChildren",v(r.path));else{if(s.liHoverIndex=s.liOldIndex,!s.liOldPath)return!1;o.mittBus.emit("setSendColumnsChildren",v(s.liOldPath))}},{deep:!0}),X(()=>{j(),o.mittBus.on("restoreDefault",()=>{s.liOldIndex=null,s.liOldPath=null})}),Y(()=>{o.mittBus.off("restoreDefault",()=>{})}),Z(t=>{U(t.path),o.mittBus.emit("setSendColumnsChildren",v(t.path))}),g({themeConfig:n,columnsAsideOffsetTopRefs:e,columnsAsideActiveRef:l,onColumnsAsideDown:I,onColumnsAsideMenuClick:P,onColumnsAsideMenuMouseenter:x,onColumnsAsideMenuMouseleave:V},ee(s))}}),me={class:"layout-columns-aside"},fe=["onClick","onMouseenter","title"],pe={class:"columns-vertical-title font12"},he=["href"],Ce={class:"columns-vertical-title font12"};function _e(e,l,o,p,M,k){const h=d("SvgIcon"),A=d("el-scrollbar");return f(),y("div",me,[m(A,null,{default:H(()=>[C("ul",{onMouseleave:l[0]||(l[0]=n=>e.onColumnsAsideMenuMouseleave())},[(f(!0),y(ne,null,oe(e.columnsAsideList,(n,r)=>(f(),y("li",{key:r,onClick:c=>e.onColumnsAsideMenuClick(n,r),onMouseenter:c=>e.onColumnsAsideMenuMouseenter(n,r),ref_for:!0,ref:c=>{c&&(e.columnsAsideOffsetTopRefs[r]=c)},class:_({"layout-columns-active":e.liIndex===r,"layout-columns-hover":e.liHoverIndex===r}),title:e.$t(n.meta.title)},[!n.meta.isLink||n.meta.isLink&&n.meta.isIframe?(f(),y("div",{key:0,class:_(e.themeConfig.columnsAsideLayout)},[m(h,{name:n.meta.icon},null,8,["name"]),C("div",pe,F(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,e.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],2)):(f(),y("div",{key:1,class:_(e.themeConfig.columnsAsideLayout)},[C("a",{href:n.meta.isLink,target:"_blank"},[m(h,{name:n.meta.icon},null,8,["name"]),C("div",Ce,F(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,e.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],8,he)],2))],42,fe))),128)),C("div",{ref:"columnsAsideActiveRef",class:_(e.themeConfig.columnsAsideStyle)},null,2)],32)]),_:1})])}var Ae=N(de,[["render",_e],["__scopeId","data-v-07532e16"]]);const ve=D({name:"layoutColumns",components:{Aside:re,Header:ue,Main:ce,ColumnsAside:Ae},setup(){const e=w(),{themeConfig:l}=b(e);return{isFixedHeader:le(()=>l.value.isFixedHeader)}}}),ye={class:"layout-columns-warp"};function $e(e,l,o,p,M,k){const h=d("ColumnsAside"),A=d("Aside"),n=d("Header"),r=d("Main"),c=d("el-scrollbar"),s=d("el-container"),$=d("el-backtop");return f(),S(s,{class:"layout-container"},{default:H(()=>[m(h),C("div",ye,[m(A),m(s,{class:_(["flex-center layout-backtop",{"layout-backtop":!e.isFixedHeader}])},{default:H(()=>[e.isFixedHeader?(f(),S(n,{key:0})):T("",!0),m(c,{class:_({"layout-backtop":e.isFixedHeader})},{default:H(()=>[e.isFixedHeader?T("",!0):(f(),S(n,{key:0})),m(r)]),_:1},8,["class"])]),_:1},8,["class"])]),m($,{target:".layout-backtop .el-scrollbar__wrap"})]),_:1})}var Be=N(ve,[["render",$e]]);export{Be as default};
