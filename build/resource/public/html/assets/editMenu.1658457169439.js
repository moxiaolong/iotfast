var $=Object.defineProperty;var h=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var B=(l,o,t)=>o in l?$(l,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[o]=t,U=(l,o)=>{for(var t in o||(o={}))q.call(o,t)&&B(l,t,o[t]);if(h)for(var t of h(o))K.call(o,t)&&B(l,t,o[t]);return l};import{_ as R,X as z,Y as O,Z as P,E as S,$ as j,a0 as W}from"./index.1658457169439.js";import{I as X}from"./index.165845716943933.js";import{h as Y}from"./common.1658457169439.js";import{j as Z,a as G,$ as J,ac as Q,l as E,V as e,O as u,n as x,u as ee,_ as i,k as g,m as T,T as p,U as D,S as A,F as _,a3 as v,M as I}from"./vue.1658457169439.js";import"./getStyleSheets.1658457169439.js";const le=Z({name:"systemEditMenu",components:{IconSelector:X},props:{visibleOptions:{type:Array,default:()=>[]},acType:{type:String,default:()=>"add"}},setup(l,{emit:o}){const t=G(null),r=J({loading:!1,isShowDialog:!1,roles:[],ruleForm:{id:void 0,pid:0,menuType:"0",menuName:"",name:"",component:"",isLink:0,menuSort:0,path:"",redirect:"",icon:"",roles:[],isHide:"0",isKeepAlive:1,isAffix:0,linkUrl:"",isIframe:0},rules:{parentId:[{required:!0,message:"\u7236\u83DC\u5355\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u63A5\u53E3\u89C4\u5219\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],path:[{required:!0,message:"\u8DEF\u7531\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],menuName:[{required:!0,message:"\u83DC\u5355\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],menuType:[{required:!0,message:"\u83DC\u5355\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},menuData:[]}),C=f=>{b(),x(()=>{z().then(F=>{r.roles=F.data.roles;const s={id:0,title:"\u4E3B\u7C7B\u76EE",children:[]};s.children=Y(F.data.menus,"id","pid"),r.menuData=new Array(s)}),f&&(l.acType==="add"?r.ruleForm.pid=f.id:l.acType==="edit"&&O(f.id).then(F=>{const s=F.data.rule;r.ruleForm={id:s.id,pid:s.pid,menuType:""+s.menuType,menuName:s.title,name:s.name,component:s.component,isLink:s.isLink,menuSort:s.weigh,path:s.path,redirect:s.redirect,icon:s.icon,roles:F.data.roleIds,isHide:""+s.isHide,isKeepAlive:s.isCached,isAffix:s.isAffix,linkUrl:s.linkUrl,isIframe:s.isIframe}})),r.isShowDialog=!0,r.loading=!1})},c=()=>{r.isShowDialog=!1},V=()=>{r.ruleForm.isIframe===1?r.ruleForm.isLink=1:r.ruleForm.isLink=0},n=()=>{c()},d=()=>{const f=ee(t);!f||f.validate(F=>{F&&(r.loading=!0,l.acType==="add"?P(r.ruleForm).then(()=>{S.success("\u83DC\u5355\u6DFB\u52A0\u6210\u529F"),c(),m(),o("menuList")}).finally(()=>{r.loading=!1}):j(r.ruleForm).then(()=>{S.success("\u83DC\u5355\u4FEE\u6539\u6210\u529F"),c(),m(),o("menuList")}).finally(()=>{r.loading=!1}))})},m=()=>{W()},b=()=>{r.ruleForm={id:void 0,pid:0,menuType:"0",menuName:"",name:"",component:"",isLink:0,menuSort:0,path:"",redirect:"",icon:"",roles:[],isHide:"0",isKeepAlive:1,isAffix:0,linkUrl:"",isIframe:0}};return U({ruleFormRef:t,openDialog:C,closeDialog:c,onSelectIframeChange:V,onCancel:n,onSubmit:d,resetMenuSession:m},Q(r))}}),ue={class:"system-edit-menu-container"},oe={key:0},ae=p("\u76EE\u5F55"),se=p("\u83DC\u5355"),re=p("\u6309\u94AE"),ne=p("\u7F13\u5B58"),de=p("\u4E0D\u7F13\u5B58"),me=p("\u56FA\u5B9A"),te=p("\u4E0D\u56FA\u5B9A"),ie=p("\u662F"),pe=p("\u5426"),fe=p("\u662F"),Fe=p("\u5426"),be={class:"dialog-footer"},ge=p("\u53D6 \u6D88");function Ee(l,o,t,r,C,c){const V=i("el-cascader"),n=i("el-form-item"),d=i("el-col"),m=i("el-radio"),b=i("el-radio-group"),f=i("el-input"),F=i("IconSelector"),s=i("el-option"),w=i("el-select"),L=i("el-input-number"),N=i("el-row"),M=i("el-form"),y=i("el-button"),H=i("el-dialog");return g(),E("div",ue,[e(H,{title:(l.acType==="add"?"\u65B0\u589E":"\u4FEE\u6539")+"\u83DC\u5355",modelValue:l.isShowDialog,"onUpdate:modelValue":o[16]||(o[16]=a=>l.isShowDialog=a),width:"769px","close-on-click-modal":!1},{footer:u(()=>[T("span",be,[e(y,{onClick:l.onCancel,size:"default"},{default:u(()=>[ge]),_:1},8,["onClick"]),e(y,{type:"primary",onClick:l.onSubmit,size:"default",loading:l.loading},{default:u(()=>[p(D(l.acType==="add"?"\u65B0 \u589E":"\u4FEE \u6539"),1)]),_:1},8,["onClick","loading"])])]),default:u(()=>[e(M,{model:l.ruleForm,rules:l.rules,ref:"ruleFormRef",size:"default","label-width":"80px"},{default:u(()=>[e(N,{gutter:35},{default:u(()=>[e(d,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:u(()=>[e(n,{label:"\u4E0A\u7EA7\u83DC\u5355"},{default:u(()=>[e(V,{options:l.menuData,props:{label:"title",value:"id",checkStrictly:!0,emitPath:!1},placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u83DC\u5355",clearable:"",class:"w100",modelValue:l.ruleForm.pid,"onUpdate:modelValue":o[0]||(o[0]=a=>l.ruleForm.pid=a)},{default:u(({node:a,data:k})=>[T("span",null,D(k.title),1),a.isLeaf?A("",!0):(g(),E("span",oe," ("+D(k.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1}),e(d,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:u(()=>[e(n,{label:"\u83DC\u5355\u7C7B\u578B",prop:"menuType"},{default:u(()=>[e(b,{modelValue:l.ruleForm.menuType,"onUpdate:modelValue":o[1]||(o[1]=a=>l.ruleForm.menuType=a)},{default:u(()=>[e(m,{label:"0"},{default:u(()=>[ae]),_:1}),e(m,{label:"1"},{default:u(()=>[se]),_:1}),e(m,{label:"2"},{default:u(()=>[re]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u83DC\u5355\u540D\u79F0",prop:"menuName"},{default:u(()=>[e(f,{modelValue:l.ruleForm.menuName,"onUpdate:modelValue":o[2]||(o[2]=a=>l.ruleForm.menuName=a),placeholder:"\u8BF7\u586B\u5199\u83DC\u5355\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u63A5\u53E3\u89C4\u5219",prop:"name"},{default:u(()=>[e(f,{modelValue:l.ruleForm.name,"onUpdate:modelValue":o[3]||(o[3]=a=>l.ruleForm.name=a),placeholder:"\u540E\u7AEF aip \u5730\u5740",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l.ruleForm.menuType==="0"||l.ruleForm.menuType==="1"?(g(),E(_,{key:0},[e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u8DEF\u7531\u8DEF\u5F84",prop:"path"},{default:u(()=>[e(f,{modelValue:l.ruleForm.path,"onUpdate:modelValue":o[4]||(o[4]=a=>l.ruleForm.path=a),placeholder:"\u8DEF\u7531\u4E2D\u7684 path \u503C",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u91CD\u5B9A\u5411"},{default:u(()=>[e(f,{modelValue:l.ruleForm.redirect,"onUpdate:modelValue":o[5]||(o[5]=a=>l.ruleForm.redirect=a),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u91CD\u5B9A\u5411",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u83DC\u5355\u56FE\u6807"},{default:u(()=>[e(F,{placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u56FE\u6807",modelValue:l.ruleForm.icon,"onUpdate:modelValue":o[6]||(o[6]=a=>l.ruleForm.icon=a),type:"all"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"},{default:u(()=>[e(f,{modelValue:l.ruleForm.component,"onUpdate:modelValue":o[7]||(o[7]=a=>l.ruleForm.component=a),placeholder:"\u7EC4\u4EF6\u8DEF\u5F84",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u94FE\u63A5\u5730\u5740"},{default:u(()=>[e(f,{modelValue:l.ruleForm.linkUrl,"onUpdate:modelValue":o[8]||(o[8]=a=>l.ruleForm.linkUrl=a),placeholder:"\u5916\u94FE/\u5185\u5D4C\u65F6\u94FE\u63A5\u5730\u5740\uFF08http:xxx.com\uFF09",clearable:"",disabled:l.ruleForm.isLink===0},null,8,["modelValue","disabled"])]),_:1})]),_:1})],64)):A("",!0),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u6743\u9650\u6807\u8BC6"},{default:u(()=>[e(w,{modelValue:l.ruleForm.roles,"onUpdate:modelValue":o[9]||(o[9]=a=>l.ruleForm.roles=a),multiple:"",placeholder:"\u9009\u62E9\u89D2\u8272",clearable:"",class:"w100"},{default:u(()=>[(g(!0),E(_,null,v(l.roles,a=>(g(),I(s,{key:"role_"+a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u83DC\u5355\u6392\u5E8F"},{default:u(()=>[e(L,{modelValue:l.ruleForm.menuSort,"onUpdate:modelValue":o[10]||(o[10]=a=>l.ruleForm.menuSort=a),"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),l.ruleForm.menuType==="0"||l.ruleForm.menuType==="1"?(g(),E(_,{key:1},[e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u662F\u5426\u9690\u85CF"},{default:u(()=>[e(b,{modelValue:l.ruleForm.isHide,"onUpdate:modelValue":o[11]||(o[11]=a=>l.ruleForm.isHide=a)},{default:u(()=>[(g(!0),E(_,null,v(l.visibleOptions,a=>(g(),I(m,{key:a.value,label:a.value},{default:u(()=>[p(D(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u9875\u9762\u7F13\u5B58"},{default:u(()=>[e(b,{modelValue:l.ruleForm.isKeepAlive,"onUpdate:modelValue":o[12]||(o[12]=a=>l.ruleForm.isKeepAlive=a)},{default:u(()=>[e(m,{label:1},{default:u(()=>[ne]),_:1}),e(m,{label:0},{default:u(()=>[de]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u662F\u5426\u56FA\u5B9A"},{default:u(()=>[e(b,{modelValue:l.ruleForm.isAffix,"onUpdate:modelValue":o[13]||(o[13]=a=>l.ruleForm.isAffix=a)},{default:u(()=>[e(m,{label:1},{default:u(()=>[me]),_:1}),e(m,{label:0},{default:u(()=>[te]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u662F\u5426\u5916\u94FE"},{default:u(()=>[e(b,{modelValue:l.ruleForm.isLink,"onUpdate:modelValue":o[14]||(o[14]=a=>l.ruleForm.isLink=a),disabled:l.ruleForm.isIframe===1},{default:u(()=>[e(m,{label:1},{default:u(()=>[ie]),_:1}),e(m,{label:0},{default:u(()=>[pe]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),e(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[e(n,{label:"\u662F\u5426\u5185\u5D4C"},{default:u(()=>[e(b,{modelValue:l.ruleForm.isIframe,"onUpdate:modelValue":o[15]||(o[15]=a=>l.ruleForm.isIframe=a),onChange:l.onSelectIframeChange},{default:u(()=>[e(m,{label:1},{default:u(()=>[fe]),_:1}),e(m,{label:0},{default:u(()=>[Fe]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1})],64)):A("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}var ye=R(le,[["render",Ee]]);export{ye as default};
