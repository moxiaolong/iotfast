var z=Object.defineProperty;var S=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var L=(e,l,t)=>l in e?z(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,$=(e,l)=>{for(var t in l||(l={}))M.call(l,t)&&L(e,t,l[t]);if(S)for(var t of S(l))R.call(l,t)&&L(e,t,l[t]);return e};import{s as g,_ as j,E as P}from"./index.1658457169439.js";import{j as O,a as k,$ as x,d as W,ac as G,l as V,V as u,O as s,u as H,_ as m,k as p,m as q,T as B,U as y,M as E,S as w,F as U,a3 as N}from"./vue.1658457169439.js";function ne(e){return g({url:"/api/v1/system/user/list",method:"get",params:e})}function ie(){return g({url:"/api/v1/system/dept/treeSelect",method:"get"})}function J(){return g({url:"/api/v1/system/user/params",method:"get"})}function K(e){return g({url:"/api/v1/system/user/getEdit",method:"get",params:{id:e}})}function Q(e){return g({url:"/api/v1/system/user/add",method:"post",data:e})}function X(e){return g({url:"/api/v1/system/user/edit",method:"put",data:e})}function pe(e,l){return g({url:"/api/v1/system/user/resetPwd",method:"put",data:{userId:e,password:l}})}function Fe(e){return g({url:"/api/v1/system/user/delete",method:"delete",data:{ids:e}})}const Y=O({name:"systemEditUser",props:{deptData:{type:Array,default:()=>[]},genderData:{type:Array,default:()=>[]}},setup(e,{emit:l}){const t=k([]),v=k([]),A=k(null),F=x({isShowDialog:!1,ruleForm:{userId:0,deptId:0,userName:"",nickName:"",password:"",mobile:"",email:"",sex:"",status:1,remark:"",postIds:[],roleIds:[],isAdmin:0},rules:{userName:[{required:!0,message:"\u7528\u6237\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],nickName:[{required:!0,message:"\u7528\u6237\u6635\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],deptId:[{required:!0,message:"\u5F52\u5C5E\u90E8\u95E8\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u7528\u6237\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],email:[{type:"email",message:"'\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740",trigger:["blur","change"]}],mobile:[{required:!0,message:"\u624B\u673A\u53F7\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801",trigger:"blur"}]}}),f=i=>{I(),i&&K(i.id).then(n=>{var _,D;const o=n.data.user;F.ruleForm={userId:o.id,deptId:o.deptId,userName:o.userName,nickName:o.userNickname,password:"-",mobile:o.mobile,email:o.userEmail,sex:String(o.sex),status:o.userStatus,remark:o.remark,postIds:(_=n.data.checkedPosts)!=null?_:[],roleIds:(D=n.data.checkedRoleIds)!=null?D:[],isAdmin:o.isAdmin}}),F.isShowDialog=!0},r=()=>{F.isShowDialog=!1},d=()=>{r()},b=()=>{const i=H(A);!i||i.validate(n=>{n&&(F.ruleForm.userId===0?Q(F.ruleForm).then(()=>{P.success("\u7528\u6237\u6DFB\u52A0\u6210\u529F"),r(),l("getUserList")}):X(F.ruleForm).then(()=>{P.success("\u7528\u6237\u4FEE\u6539\u6210\u529F"),r(),l("getUserList")}))})},c=()=>{J().then(i=>{var n,o;t.value=(n=i.data.roleList)!=null?n:[],v.value=(o=i.data.posts)!=null?o:[]})};W(()=>{c()});const I=()=>{F.ruleForm={userId:0,deptId:0,userName:"",nickName:"",password:"",mobile:"",email:"",sex:"",status:1,remark:"",postIds:[],roleIds:[],isAdmin:0}};return $({openDialog:f,closeDialog:r,onCancel:d,onSubmit:b,roleList:t,postList:v,formRef:A},G(F))}}),Z={class:"system-edit-user-container"},ee={key:0},le=B("\u540E\u53F0\u7BA1\u7406\u5458"),ue=B("\u524D\u53F0\u7528\u6237"),ae={class:"dialog-footer"},se=B("\u53D6 \u6D88");function re(e,l,t,v,A,F){const f=m("el-input"),r=m("el-form-item"),d=m("el-col"),b=m("el-option"),c=m("el-select"),I=m("el-cascader"),i=m("el-switch"),n=m("el-radio"),o=m("el-radio-group"),_=m("el-row"),D=m("el-form"),h=m("el-button"),T=m("el-dialog");return p(),V("div",Z,[u(T,{title:(e.ruleForm.userId!==0?"\u4FEE\u6539":"\u6DFB\u52A0")+"\u7528\u6237",modelValue:e.isShowDialog,"onUpdate:modelValue":l[12]||(l[12]=a=>e.isShowDialog=a),width:"769px"},{footer:s(()=>[q("span",ae,[u(h,{onClick:e.onCancel,size:"default"},{default:s(()=>[se]),_:1},8,["onClick"]),u(h,{type:"primary",onClick:e.onSubmit,size:"default"},{default:s(()=>[B(y(e.ruleForm.userId!==0?"\u4FEE \u6539":"\u6DFB \u52A0"),1)]),_:1},8,["onClick"])])]),default:s(()=>[u(D,{ref:"formRef",model:e.ruleForm,rules:e.rules,size:"default","label-width":"90px"},{default:s(()=>[u(_,{gutter:35},{default:s(()=>[e.ruleForm.userId===0?(p(),E(d,{key:0,xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[u(r,{label:"\u7528\u6237\u540D",prop:"userName"},{default:s(()=>[u(f,{modelValue:e.ruleForm.userName,"onUpdate:modelValue":l[0]||(l[0]=a=>e.ruleForm.userName=a),placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):w("",!0),e.ruleForm.userId===0?(p(),E(d,{key:1,xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[u(r,{label:"\u8D26\u6237\u5BC6\u7801",prop:"password"},{default:s(()=>[u(f,{modelValue:e.ruleForm.password,"onUpdate:modelValue":l[1]||(l[1]=a=>e.ruleForm.password=a),placeholder:"\u8BF7\u8F93\u5165",type:"password",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})):w("",!0),u(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[u(r,{label:"\u7528\u6237\u6635\u79F0",prop:"nickName"},{default:s(()=>[u(f,{modelValue:e.ruleForm.nickName,"onUpdate:modelValue":l[2]||(l[2]=a=>e.ruleForm.nickName=a),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),u(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[u(r,{label:"\u5173\u8054\u89D2\u8272",prop:"roleIds"},{default:s(()=>[u(c,{modelValue:e.ruleForm.roleIds,"onUpdate:modelValue":l[3]||(l[3]=a=>e.ruleForm.roleIds=a),placeholder:"\u8BF7\u9009\u62E9",clearable:"",class:"w100",multiple:""},{default:s(()=>[(p(!0),V(U,null,N(e.roleList,a=>(p(),E(b,{key:"role-"+a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[u(r,{label:"\u90E8\u95E8",prop:"deptId"},{default:s(()=>[u(I,{options:e.deptData,props:{checkStrictly:!0,emitPath:!1,value:"deptId",label:"deptName"},placeholder:"\u8BF7\u9009\u62E9\u90E8\u95E8",clearable:"",class:"w100",modelValue:e.ruleForm.deptId,"onUpdate:modelValue":l[4]||(l[4]=a=>e.ruleForm.deptId=a)},{default:s(({node:a,data:C})=>[q("span",null,y(C.deptName),1),a.isLeaf?w("",!0):(p(),V("span",ee," ("+y(C.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1}),u(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[u(r,{label:"\u624B\u673A\u53F7",prop:"mobile"},{default:s(()=>[u(f,{modelValue:e.ruleForm.mobile,"onUpdate:modelValue":l[5]||(l[5]=a=>e.ruleForm.mobile=a),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),u(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[u(r,{label:"\u90AE\u7BB1",prop:"email"},{default:s(()=>[u(f,{modelValue:e.ruleForm.email,"onUpdate:modelValue":l[6]||(l[6]=a=>e.ruleForm.email=a),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),u(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[u(r,{label:"\u6027\u522B",prop:"sex"},{default:s(()=>[u(c,{modelValue:e.ruleForm.sex,"onUpdate:modelValue":l[7]||(l[7]=a=>e.ruleForm.sex=a),placeholder:"\u8BF7\u9009\u62E9",clearable:"",class:"w100"},{default:s(()=>[(p(!0),V(U,null,N(e.genderData,a=>(p(),E(b,{key:"gender-"+a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[u(r,{label:"\u5C97\u4F4D",prop:"postIds"},{default:s(()=>[u(c,{modelValue:e.ruleForm.postIds,"onUpdate:modelValue":l[8]||(l[8]=a=>e.ruleForm.postIds=a),placeholder:"\u8BF7\u9009\u62E9",clearable:"",class:"w100",multiple:""},{default:s(()=>[(p(!0),V(U,null,N(e.postList,a=>(p(),E(b,{key:"post-"+a.postId,label:a.postName,value:a.postId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(d,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[u(r,{label:"\u7528\u6237\u72B6\u6001"},{default:s(()=>[u(i,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[9]||(l[9]=a=>e.ruleForm.status=a),"inline-prompt":"","active-value":1,"inactive-value":0,"active-text":"\u542F","inactive-text":"\u7981"},null,8,["modelValue"])]),_:1})]),_:1}),u(d,{span:24},{default:s(()=>[u(r,{label:"\u7528\u6237\u7C7B\u578B"},{default:s(()=>[u(o,{modelValue:e.ruleForm.isAdmin,"onUpdate:modelValue":l[10]||(l[10]=a=>e.ruleForm.isAdmin=a)},{default:s(()=>[u(n,{label:1},{default:s(()=>[le]),_:1}),u(n,{label:0},{default:s(()=>[ue]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),u(d,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:s(()=>[u(r,{label:"\u7528\u6237\u63CF\u8FF0"},{default:s(()=>[u(f,{modelValue:e.ruleForm.remark,"onUpdate:modelValue":l[11]||(l[11]=a=>e.ruleForm.remark=a),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u63CF\u8FF0",maxlength:"150"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}var oe=j(Y,[["render",re]]),fe=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{oe as E,ne as a,Fe as d,fe as e,ie as g,pe as r};
