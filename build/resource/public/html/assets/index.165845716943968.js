var q=Object.defineProperty,S=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var k=(e,n,l)=>n in e?q(e,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[n]=l,A=(e,n)=>{for(var l in n||(n={}))H.call(n,l)&&k(e,l,n[l]);if(B)for(var l of B(n))I.call(n,l)&&k(e,l,n[l]);return e},V=(e,n)=>S(e,z(n));import{j as N,aw as U,a as T,$ as Q,G as j,ac as G,l as J,V as t,O as u,u as K,_ as a,a6 as W,k as p,m as D,P as F,M as C,U as _,T as r,S as X}from"./vue.1658457169439.js";import{u as Y}from"./data.1658457169439.js";import{_ as Z,T as x,U as ee,L as te,V as oe,E as ne}from"./index.1658457169439.js";import{h as ue,s as le}from"./common.1658457169439.js";import ae from"./addMenu.1658457169439.js";import se from"./editMenu.1658457169439.js";import"./index.165845716943933.js";import"./getStyleSheets.1658457169439.js";const ie=N({name:"systemMenu",components:{AddMenu:ae,EditMenu:se},setup(){const e=x();U(e);const n=T(),l=T(),f=Q({queryParams:{title:"",component:""},menuTableData:[]}),{sys_show_hide:b}=Y("sys_show_hide"),h=T("add"),w=s=>{h.value="add",l.value.openDialog(s)},m=s=>{h.value="edit",l.value.openDialog(s)},M=s=>{te.confirm(`\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8DEF\u7531\uFF1A${s.title}, \u662F\u5426\u7EE7\u7EED?`,"\u63D0\u793A",{confirmButtonText:"\u5220\u9664",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{oe(s.id).then(()=>{ne.success("\u5220\u9664\u6210\u529F"),c()})}).catch(()=>{})},y=s=>le(K(b),""+s.isHide);j(()=>{c()});const d=()=>{c()},c=()=>{ee(f.queryParams).then(s=>{var E;f.menuTableData=ue((E=s.data.rules)!=null?E:[],"id","pid")})};return V(A({addMenuRef:n,editMenuRef:l,onOpenAddMenu:w,onOpenEditMenu:m,onTabelRowDel:M,formatIsHide:y,menuList:c,handleQuery:d},G(f)),{sys_show_hide:b,acType:h})}}),de={class:"system-menu-container"},re={class:"system-menu-search mb15"},me=r(" \u67E5\u8BE2 "),ce=r(" \u65B0\u589E\u83DC\u5355 "),pe={class:"ml10"},_e=r("\u65B0\u589E"),fe=r("\u4FEE\u6539"),he=r("\u5220\u9664");function we(e,n,l,f,b,h){const w=a("el-input"),m=a("el-form-item"),M=a("ele-Search"),y=a("el-icon"),d=a("el-button"),c=a("ele-FolderAdd"),s=a("el-form"),E=a("SvgIcon"),i=a("el-table-column"),$=a("el-tag"),R=a("el-table"),L=a("el-card"),O=a("AddMenu"),P=a("EditMenu"),v=W("auth");return p(),J("div",de,[t(L,{shadow:"hover"},{default:u(()=>[D("div",re,[t(s,{inline:!0,size:"default","label-width":"100px"},{default:u(()=>[t(m,{label:"\u83DC\u5355\u540D\u79F0"},{default:u(()=>[t(w,{modelValue:e.queryParams.title,"onUpdate:modelValue":n[0]||(n[0]=o=>e.queryParams.title=o),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),t(m,{label:"\u7EC4\u4EF6\u8DEF\u5F84"},{default:u(()=>[t(w,{modelValue:e.queryParams.component,"onUpdate:modelValue":n[1]||(n[1]=o=>e.queryParams.component=o),placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u8DEF\u5F84",clearable:""},null,8,["modelValue"])]),_:1}),t(m,null,{default:u(()=>[t(d,{type:"primary",onClick:e.handleQuery},{default:u(()=>[t(y,null,{default:u(()=>[t(M)]),_:1}),me]),_:1},8,["onClick"])]),_:1}),t(m,{style:{"vertical-align":"top"}},{default:u(()=>[F((p(),C(d,{type:"success",onClick:n[2]||(n[2]=o=>e.onOpenAddMenu(null))},{default:u(()=>[t(y,null,{default:u(()=>[t(c)]),_:1}),ce]),_:1})),[[v,"api/v1/system/menu/add"]])]),_:1})]),_:1})]),t(R,{data:e.menuTableData,style:{width:"100%"},"row-key":"path","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:u(()=>[t(i,{label:"\u83DC\u5355\u540D\u79F0","show-overflow-tooltip":""},{default:u(o=>[t(E,{name:o.row.icon},null,8,["name"]),D("span",pe,_(o.row.title),1)]),_:1}),t(i,{prop:"path",label:"\u8DEF\u7531\u8DEF\u5F84","show-overflow-tooltip":""}),t(i,{label:"\u7EC4\u4EF6\u8DEF\u5F84","show-overflow-tooltip":""},{default:u(o=>[D("span",null,_(o.row.component),1)]),_:1}),t(i,{label:"api\u63A5\u53E3","show-overflow-tooltip":""},{default:u(o=>[D("span",null,_(o.row.name),1)]),_:1}),t(i,{label:"\u6392\u5E8F","show-overflow-tooltip":"",width:"80"},{default:u(o=>[r(_(o.row.weigh),1)]),_:1}),t(i,{label:"\u7C7B\u578B","show-overflow-tooltip":"",width:"80"},{default:u(o=>[t($,{type:o.row.menuType===0?"danger":o.row.menuType===1?"success":"warning",size:"small"},{default:u(()=>[r(_(o.row.menuType===0?"\u76EE\u5F55":o.row.menuType===1?"\u83DC\u5355":"\u6309\u94AE"),1)]),_:2},1032,["type"])]),_:1}),t(i,{prop:"isHide",label:"\u663E\u793A\u72B6\u6001",formatter:e.formatIsHide,width:"100"},null,8,["formatter"]),t(i,{label:"\u64CD\u4F5C","show-overflow-tooltip":"",width:"160"},{default:u(o=>[o.row.menuType!==2?F((p(),C(d,{key:0,class:"no_padding",size:"small",type:"text",onClick:g=>e.onOpenAddMenu(o.row)},{default:u(()=>[_e]),_:2},1032,["onClick"])),[[v,"api/v1/system/menu/add"]]):X("",!0),F((p(),C(d,{class:"no_padding",size:"small",type:"text",onClick:g=>e.onOpenEditMenu(o.row)},{default:u(()=>[fe]),_:2},1032,["onClick"])),[[v,"api/v1/system/menu/update"]]),F((p(),C(d,{class:"no_padding",size:"small",type:"text",onClick:g=>e.onTabelRowDel(o.row)},{default:u(()=>[he]),_:2},1032,["onClick"])),[[v,"api/v1/system/menu/delete"]])]),_:1})]),_:1},8,["data"])]),_:1}),t(O,{ref:"addMenuRef"},null,512),t(P,{ref:"editMenuRef",onMenuList:e.menuList,visibleOptions:e.sys_show_hide,acType:e.acType},null,8,["onMenuList","visibleOptions","acType"])])}var ge=Z(ie,[["render",we]]);export{ge as default};
