var K=Object.defineProperty;var D=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var k=(e,o,t)=>o in e?K(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,P=(e,o)=>{for(var t in o||(o={}))M.call(o,t)&&k(e,t,o[t]);if(D)for(var t of D(o))O.call(o,t)&&k(e,t,o[t]);return e};import{j as H,a as W,$ as X,d as Y,ac as Z,l as x,V as u,O as l,P as w,M as ee,Q as ue,u as oe,_ as n,a6 as le,k as S,m as A,a5 as U,U as te,c as ae,T as c}from"./vue.1658457169439.js";import{s as g,_ as ne,L as q,E as b}from"./index.1658457169439.js";function re(e){return g({url:"/api/v1/system/job/list",method:"get",params:e})}function se(e){return g({url:"/api/v1/system/job/get",method:"get",params:{id:e.toString()}})}function de(e){return g({url:"/api/v1/system/job/add",method:"post",data:e})}function ie(e){return g({url:"/api/v1/system/job/edit",method:"put",data:e})}function pe(e){return g({url:"/api/v1/system/job/delete",method:"delete",data:{ids:e}})}function me(e,o){return g({url:"/api/v1/system/job/status",method:"put",data:{jobId:e,status:o}})}const ce=H({components:{},name:"SysJob",setup(){const{proxy:e}=ae(),o=W(null),t=X({loading:!0,ids:[],single:!0,multiple:!0,total:0,jobList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,jobName:void 0,jobGroup:void 0,status:void 0},ruleForm:{},rules:{jobName:[{required:!0,message:"\u4EFB\u52A1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],invokeTarget:[{required:!0,message:"\u8C03\u7528\u76EE\u6807\u5B57\u7B26\u4E32\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],cronExpression:[{required:!0,message:"cron\u6267\u884C\u8868\u8FBE\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\uFF080\u6B63\u5E38 1\u6682\u505C\uFF09\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),V=r=>{let s=r.status===1?"\u542F\u7528":"\u505C\u7528";q.confirm('\u786E\u8BA4\u8981"'+s+'"\uFF1A\u5417?',"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return me(r.jobId,r.status)}).then(()=>{b.success(s+"\u6210\u529F")}).catch(function(){})},F=()=>{t.loading=!0,re(t.queryParams).then(r=>{t.jobList=r.data.list,t.total=r.data.total,t.loading=!1})},j=()=>{t.open=!1,i()},i=()=>{t.ruleForm={jobId:void 0,jobName:void 0,jobParams:void 0,jobGroup:void 0,invokeTarget:void 0,cronExpression:void 0,misfirePolicy:void 0,concurrent:void 0,status:"0",createBy:void 0,updateBy:void 0,remark:void 0,createdAt:void 0,updatedAt:void 0,deletedAt:void 0}},d=()=>{t.queryParams.pageNum=1,F()},C=()=>{d()},h=r=>{t.ids=r.map(s=>s.jobId),t.single=r.length!=1,t.multiple=!r.length},y=()=>{i(),t.open=!0,t.title="\u6DFB\u52A0\u5B9A\u65F6\u4EFB\u52A1\u8C03\u5EA6"},f=r=>{i();const s=r.jobId||t.ids;se(s).then(E=>{let B=E.data;B.status=""+B.status,t.ruleForm=B,t.open=!0,t.title="\u4FEE\u6539\u5B9A\u65F6\u4EFB\u52A1\u8C03\u5EA6"})},m=()=>{oe(o),e.$refs.formRef.validate(r=>{r&&(t.ruleForm.jobId!=null?ie(t.ruleForm).then(s=>{s.code===0?(b.success("\u4FEE\u6539\u6210\u529F"),t.open=!1,F()):b.error(s.msg)}):de(t.ruleForm).then(s=>{s.code===0?(b.success("\u65B0\u589E\u6210\u529F"),t.open=!1,F()):b.error(s.msg)}))})},v=r=>{const s=r.jobId||t.ids;q.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u5B9A\u65F6\u4EFB\u52A1\u8C03\u5EA6\u7F16\u53F7\u4E3A"'+s+'"\u7684\u6570\u636E\u9879?',"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return pe(s)}).then(()=>{F(),b.success("\u5220\u9664\u6210\u529F")}).catch(function(){})};return Y(()=>{F()}),P({handlestatusChange:V,handleGetList:F,handleCancel:j,handleReset:i,handleQuery:d,resetQuery:C,handleSelectionChange:h,handleAdd:y,handleUpdate:f,submitForm:m,handleDelete:v},Z(t))}}),Fe={class:"app-container"},fe={class:"job-search mb15"},be=c(" \u67E5\u8BE2"),ge=c(" \u91CD\u7F6E"),Ee=c(" \u65B0\u589E"),Be=c(" \u4FEE\u6539"),_e=c(" \u5220\u9664"),Ce=c("\u4FEE\u6539"),he=c("\u5220\u9664"),ye=c("\u8BF7\u9009\u62E9\u5B57\u5178\u751F\u6210"),ve={class:"dialog-footer"},Ae=c("\u53D6 \u6D88"),Ve=c("\u786E \u5B9A");function je(e,o,t,V,F,j){const i=n("el-input"),d=n("el-form-item"),C=n("el-option"),h=n("el-select"),y=n("ele-Search"),f=n("el-icon"),m=n("el-button"),v=n("ele-Refresh"),r=n("el-form"),s=n("ele-FolderAdd"),E=n("el-col"),B=n("ele-Edit"),N=n("ele-Delete"),T=n("el-row"),I=n("el-card"),p=n("el-table-column"),z=n("el-switch"),$=n("el-table"),G=n("pagination"),J=n("el-radio"),Q=n("el-radio-group"),R=n("el-dialog"),L=le("loading");return S(),x("div",Fe,[u(I,{shadow:"hover"},{default:l(()=>[A("div",fe,[u(r,{inline:!0,size:"default","label-width":"68px"},{default:l(()=>[u(d,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"jobName"},{default:l(()=>[u(i,{modelValue:e.queryParams.jobName,"onUpdate:modelValue":o[0]||(o[0]=a=>e.queryParams.jobName=a),placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0",clearable:"",onKeyup:U(e.handleQuery,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),u(d,{label:"\u4EFB\u52A1\u7EC4\u540D",prop:"jobGroup"},{default:l(()=>[u(i,{modelValue:e.queryParams.jobGroup,"onUpdate:modelValue":o[1]||(o[1]=a=>e.queryParams.jobGroup=a),placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u7EC4\u540D",clearable:"",onKeyup:U(e.handleQuery,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),u(d,{label:"\u72B6\u6001",prop:"status"},{default:l(()=>[u(h,{modelValue:e.queryParams.status,"onUpdate:modelValue":o[2]||(o[2]=a=>e.queryParams.status=a),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001\uFF080\u6B63\u5E38 1\u6682\u505C\uFF09",clearable:""},{default:l(()=>[u(C,{label:"\u8BF7\u9009\u62E9\u5B57\u5178\u751F\u6210",value:""})]),_:1},8,["modelValue"])]),_:1}),u(d,null,{default:l(()=>[u(m,{type:"primary",onClick:e.handleQuery},{default:l(()=>[u(f,null,{default:l(()=>[u(y)]),_:1}),be]),_:1},8,["onClick"]),u(m,{onClick:e.resetQuery},{default:l(()=>[u(f,null,{default:l(()=>[u(v)]),_:1}),ge]),_:1},8,["onClick"])]),_:1})]),_:1}),u(T,{gutter:10,class:"mb8"},{default:l(()=>[u(E,{span:1.5},{default:l(()=>[u(m,{type:"primary",onClick:e.handleAdd},{default:l(()=>[u(f,null,{default:l(()=>[u(s)]),_:1}),Ee]),_:1},8,["onClick"])]),_:1},8,["span"]),u(E,{span:1.5},{default:l(()=>[u(m,{type:"success",disabled:e.single,onClick:e.handleUpdate},{default:l(()=>[u(f,null,{default:l(()=>[u(B)]),_:1}),Be]),_:1},8,["disabled","onClick"])]),_:1},8,["span"]),u(E,{span:1.5},{default:l(()=>[u(m,{type:"danger",disabled:e.multiple,onClick:e.handleDelete},{default:l(()=>[u(f,null,{default:l(()=>[u(N)]),_:1}),_e]),_:1},8,["disabled","onClick"])]),_:1},8,["span"])]),_:1})])]),_:1}),w((S(),ee($,{data:e.jobList,onSelectionChange:e.handleSelectionChange,style:{width:"100%"}},{default:l(()=>[u(p,{type:"selection",width:"55",align:"center"}),u(p,{label:"\u4EFB\u52A1ID",align:"center",prop:"jobId"}),u(p,{label:"\u4EFB\u52A1\u540D\u79F0",align:"center",prop:"jobName"}),u(p,{label:"\u53C2\u6570",align:"center",prop:"jobParams"}),u(p,{label:"\u4EFB\u52A1\u7EC4\u540D",align:"center",prop:"jobGroup"}),u(p,{label:"\u8C03\u7528\u76EE\u6807\u5B57\u7B26\u4E32",align:"center",prop:"invokeTarget"}),u(p,{label:"cron\u6267\u884C\u8868\u8FBE\u5F0F",align:"center",prop:"cronExpression"}),u(p,{label:"\u8BA1\u5212\u6267\u884C\u7B56\u7565",align:"center",prop:"misfirePolicy"}),u(p,{label:"\u662F\u5426\u5E76\u53D1\u6267\u884C",align:"center",prop:"concurrent"}),u(p,{label:"\u72B6\u6001",align:"center"},{default:l(a=>[u(z,{modelValue:a.row.status,"onUpdate:modelValue":_=>a.row.status=_,"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"\u542F","inactive-text":"\u7981",onChange:_=>e.handlestatusChange(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),u(p,{label:"\u521B\u5EFA\u8005",align:"center",prop:"createBy"}),u(p,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:l(a=>[u(m,{type:"text",class:"no_padding",size:"small",onClick:_=>e.handleUpdate(a.row)},{default:l(()=>[Ce]),_:2},1032,["onClick"]),u(m,{type:"text",class:"no_padding",size:"small",onClick:_=>e.handleDelete(a.row)},{default:l(()=>[he]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[L,e.loading]]),w(u(G,{total:e.total,page:e.queryParams.pageNum,"onUpdate:page":o[3]||(o[3]=a=>e.queryParams.pageNum=a),limit:e.queryParams.pageSize,"onUpdate:limit":o[4]||(o[4]=a=>e.queryParams.pageSize=a),onPagination:e.jobList},null,8,["total","page","limit","onPagination"]),[[ue,e.total>0]]),u(R,{title:e.title,modelValue:e.open,"onUpdate:modelValue":o[12]||(o[12]=a=>e.open=a),width:"769px"},{header:l(()=>[A("div",null,te(e.title),1)]),footer:l(()=>[A("span",ve,[u(m,{onClick:e.handleCancel,size:"default"},{default:l(()=>[Ae]),_:1},8,["onClick"]),u(m,{type:"primary",onClick:e.submitForm,size:"default"},{default:l(()=>[Ve]),_:1},8,["onClick"])])]),default:l(()=>[u(r,{model:e.ruleForm,ref:"formRef",rules:e.rules,size:"default","label-width":"120px"},{default:l(()=>[u(d,{label:"\u53C2\u6570",prop:"jobParams"},{default:l(()=>[u(i,{modelValue:e.ruleForm.jobParams,"onUpdate:modelValue":o[5]||(o[5]=a=>e.ruleForm.jobParams=a),placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u8C03\u7528\u76EE\u6807\u5B57\u7B26\u4E32",prop:"invokeTarget"},{default:l(()=>[u(i,{modelValue:e.ruleForm.invokeTarget,"onUpdate:modelValue":o[6]||(o[6]=a=>e.ruleForm.invokeTarget=a),placeholder:"\u8BF7\u8F93\u5165\u8C03\u7528\u76EE\u6807\u5B57\u7B26\u4E32"},null,8,["modelValue"])]),_:1}),u(d,{label:"cron\u6267\u884C\u8868\u8FBE\u5F0F",prop:"cronExpression"},{default:l(()=>[u(i,{modelValue:e.ruleForm.cronExpression,"onUpdate:modelValue":o[7]||(o[7]=a=>e.ruleForm.cronExpression=a),placeholder:"\u8BF7\u8F93\u5165cron\u6267\u884C\u8868\u8FBE\u5F0F"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u8BA1\u5212\u6267\u884C\u7B56\u7565",prop:"misfirePolicy"},{default:l(()=>[u(i,{modelValue:e.ruleForm.misfirePolicy,"onUpdate:modelValue":o[8]||(o[8]=a=>e.ruleForm.misfirePolicy=a),placeholder:"\u8BF7\u8F93\u5165\u8BA1\u5212\u6267\u884C\u7B56\u7565\uFF081\u591A\u6B21\u6267\u884C 2\u6267\u884C\u4E00\u6B21\uFF09"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u662F\u5426\u5E76\u53D1\u6267\u884C",prop:"concurrent"},{default:l(()=>[u(i,{modelValue:e.ruleForm.concurrent,"onUpdate:modelValue":o[9]||(o[9]=a=>e.ruleForm.concurrent=a),placeholder:"\u8BF7\u8F93\u5165\u662F\u5426\u5E76\u53D1\u6267\u884C\uFF080\u5141\u8BB8 1\u7981\u6B62\uFF09"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u72B6\u6001",prop:"status"},{default:l(()=>[u(Q,{modelValue:e.ruleForm.status,"onUpdate:modelValue":o[10]||(o[10]=a=>e.ruleForm.status=a)},{default:l(()=>[u(J,{label:"1"},{default:l(()=>[ye]),_:1})]),_:1},8,["modelValue"])]),_:1}),u(d,{label:"\u5907\u6CE8\u4FE1\u606F",prop:"remark"},{default:l(()=>[u(i,{modelValue:e.ruleForm.remark,"onUpdate:modelValue":o[11]||(o[11]=a=>e.ruleForm.remark=a),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8\u4FE1\u606F"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}var we=ne(ce,[["render",je]]);export{we as default};
