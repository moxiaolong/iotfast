var j=Object.defineProperty;var w=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var T=(e,a,l)=>a in e?j(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,U=(e,a)=>{for(var l in a||(a={}))G.call(a,l)&&T(e,l,a[l]);if(w)for(var l of w(a))H.call(a,l)&&T(e,l,a[l]);return e};import{j as J,a as K,$ as W,d as X,ac as Y,l as Z,V as u,O as t,P as k,M as x,Q as ee,_ as n,a6 as ue,k as q,m as y,U as te,c as le,T as m}from"./vue.1658457169439.js";import{s as g,_ as ae,L as I,E as _}from"./index.1658457169439.js";function oe(e){return g({url:"/api/v1/device/deviceStatus/list",method:"get",params:e})}function ne(e){return g({url:"/api/v1/device/deviceStatus/get",method:"get",params:{id:e.toString()}})}function de(e){return g({url:"/api/v1/device/deviceStatus/add",method:"post",data:e})}function ie(e){return g({url:"/api/v1/device/deviceStatus/edit",method:"put",data:e})}function se(e){return g({url:"/api/v1/device/deviceStatus/delete",method:"delete",data:{ids:e}})}function re(e,a){return g({url:"/api/v1/device/deviceStatus/status",method:"put",data:{id:e,status:a}})}const me=J({components:{},name:"DeviceStatus",setup(){const{proxy:e}=le(),a=K(null),l=W({loading:!0,ids:[],single:!0,multiple:!0,total:0,deviceStatusList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,deviceId:void 0,status:void 0,timeOut:void 0,upTime:void 0,downTime:void 0,lastDataUpdateTime:void 0},ruleForm:{},rules:{deviceId:[{required:!0,message:"\u8BBE\u5907ID\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],timeOut:[{required:!0,message:"\u8D85\u65F6\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],lastDataUpdateTime:[{required:!0,message:"\u6700\u65B0\u4E00\u6B21\u6570\u636E\u66F4\u65B0\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),S=i=>{let d=i.status===1?"\u542F\u7528":"\u505C\u7528";I.confirm('\u786E\u8BA4\u8981"'+d+'"\uFF1A\u5417?',"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return re(i.id,i.status)}).then(()=>{_.success(d+"\u6210\u529F")}).catch(function(){})},c=()=>{l.loading=!0,oe(l.queryParams).then(i=>{l.deviceStatusList=i.data.list,l.total=i.data.total,l.loading=!1})},A=()=>{l.open=!1,f()},f=()=>{l.ruleForm={id:void 0,deviceId:void 0,status:"0",timeOut:void 0,upTime:void 0,downTime:void 0,lastDataUpdateTime:void 0}},h=()=>{l.queryParams.pageNum=1,c()},s=()=>{h()},b=i=>{l.ids=i.map(d=>d.id),l.single=i.length!=1,l.multiple=!i.length},F=()=>{f(),l.open=!0,l.title="\u6DFB\u52A0\u8BBE\u5907\u72B6\u6001"},r=i=>{f();const d=i.id||l.ids;ne(d).then(V=>{let v=V.data;v.status=""+v.status,l.ruleForm=v,l.open=!0,l.title="\u4FEE\u6539\u8BBE\u5907\u72B6\u6001"})},C=()=>{e.$refs.formRef.validate(i=>{i&&(l.ruleForm.id!=null?ie(l.ruleForm).then(d=>{d.code===0?(_.success("\u4FEE\u6539\u6210\u529F"),l.open=!1,c()):_.error(d.msg)}):de(l.ruleForm).then(d=>{d.code===0?(_.success("\u65B0\u589E\u6210\u529F"),l.open=!1,c()):_.error(d.msg)}))})},E=i=>{const d=i.id||l.ids;I.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u8BBE\u5907\u72B6\u6001\u7F16\u53F7\u4E3A"'+d+'"\u7684\u6570\u636E\u9879?',"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return se(d)}).then(()=>{c(),_.success("\u5220\u9664\u6210\u529F")}).catch(function(){})};return X(()=>{c()}),U({formRef:a,handlestatusChange:S,handleGetList:c,handleCancel:A,handleReset:f,handleQuery:h,resetQuery:s,handleSelectionChange:b,handleAdd:F,handleUpdate:r,submitForm:C,handleDelete:E},Y(l))}}),pe={class:"app-container"},ce={class:"deviceStatus-search mb15"},Fe=m(" \u67E5\u8BE2"),fe=m(" \u91CD\u7F6E"),_e=m(" \u65B0\u589E"),ge=m(" \u4FEE\u6539"),ve=m(" \u5220\u9664"),Be=m("\u4FEE\u6539"),he=m("\u5220\u9664"),Ee=m("submitForm "),De=m("\u8BF7\u9009\u62E9\u5B57\u5178\u751F\u6210"),be={class:"dialog-footer"},Ce=m("\u53D6 \u6D88"),Ve=m("\u786E \u5B9A");function ye(e,a,l,S,c,A){const f=n("el-option"),h=n("el-select"),s=n("el-form-item"),b=n("ele-Se"),F=n("el-icon"),r=n("el-button"),C=n("ele-Refresh"),E=n("el-form"),i=n("ele-FolderAdd"),d=n("el-col"),V=n("ele-Edit"),v=n("ele-Delete"),P=n("el-row"),z=n("el-card"),p=n("el-table-column"),$=n("el-switch"),O=n("el-table"),N=n("pagination"),B=n("el-input"),R=n("el-radio"),L=n("el-radio-group"),Q=n("el-dialog"),M=ue("loading");return q(),Z("div",pe,[u(z,{shadow:"hover"},{default:t(()=>[y("div",ce,[u(E,{inline:!0,size:"default","label-width":"68px"},{default:t(()=>[u(s,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[u(h,{modelValue:e.queryParams.status,"onUpdate:modelValue":a[0]||(a[0]=o=>e.queryParams.status=o),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:""},{default:t(()=>[u(f,{label:"\u8BF7\u9009\u62E9\u5B57\u5178\u751F\u6210",value:""})]),_:1},8,["modelValue"])]),_:1}),u(s,null,{default:t(()=>[u(r,{type:"primary",onClick:e.handleQuery},{default:t(()=>[u(F,null,{default:t(()=>[u(b,{style:{"vertical-align":"top"},arch:""})]),_:1}),Fe]),_:1},8,["onClick"])]),_:1}),u(s,{style:{"vertical-align":"top"}},{default:t(()=>[u(r,{onClick:e.resetQuery},{default:t(()=>[u(F,null,{default:t(()=>[u(C)]),_:1}),fe]),_:1},8,["onClick"])]),_:1})]),_:1}),u(P,{gutter:10,class:"mb8"},{default:t(()=>[u(d,{span:1.5},{default:t(()=>[u(r,{type:"primary",onClick:e.handleAdd},{default:t(()=>[u(F,null,{default:t(()=>[u(i)]),_:1}),_e]),_:1},8,["onClick"])]),_:1},8,["span"]),u(d,{span:1.5},{default:t(()=>[u(r,{type:"success",disabled:e.single,onClick:e.handleUpdate},{default:t(()=>[u(F,null,{default:t(()=>[u(V)]),_:1}),ge]),_:1},8,["disabled","onClick"])]),_:1},8,["span"]),u(d,{span:1.5},{default:t(()=>[u(r,{type:"danger",disabled:e.multiple,onClick:e.handleDelete},{default:t(()=>[u(F,null,{default:t(()=>[u(v)]),_:1}),ve]),_:1},8,["disabled","onClick"])]),_:1},8,["span"])]),_:1})])]),_:1}),k((q(),x(O,{data:e.deviceStatusList,onSelectionChange:e.handleSelectionChange,style:{width:"100%"}},{default:t(()=>[u(p,{type:"selection",width:"55",align:"center"}),u(p,{label:"\u8BBE\u5907ID",align:"center",prop:"deviceId"}),u(p,{label:"\u72B6\u6001",align:"center"},{default:t(o=>[u($,{modelValue:o.row.status,"onUpdate:modelValue":D=>o.row.status=D,"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"\u542F","inactive-text":"\u7981",onChange:D=>e.handlestatusChange(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),u(p,{label:"\u8D85\u65F6\u65F6\u95F4",align:"center",prop:"timeOut"}),u(p,{label:"\u4E0A\u7EBF\u65F6\u95F4",align:"center",prop:"upTime"}),u(p,{label:"\u79BB\u7EBF\u65F6\u95F4",align:"center",prop:"downTime"}),u(p,{label:"\u6700\u65B0\u4E00\u6B21\u6570\u636E\u66F4\u65B0\u65F6\u95F4",align:"center",prop:"lastDataUpdateTime"}),u(p,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:t(o=>[u(r,{type:"text",class:"no_padding",size:"small",onClick:D=>e.handleUpdate(o.row)},{default:t(()=>[Be]),_:2},1032,["onClick"]),u(r,{type:"text",class:"no_padding",size:"small",onClick:D=>e.handleDelete(o.row)},{default:t(()=>[he]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[M,e.loading]]),k(u(N,{total:e.total,page:e.queryParams.pageNum,"onUpdate:page":a[1]||(a[1]=o=>e.queryParams.pageNum=o),limit:e.queryParams.pageSize,"onUpdate:limit":a[2]||(a[2]=o=>e.queryParams.pageSize=o),onPagination:e.deviceStatusList},null,8,["total","page","limit","onPagination"]),[[ee,e.total>0]]),u(Q,{title:e.title,modelValue:e.open,"onUpdate:modelValue":a[9]||(a[9]=o=>e.open=o),width:"769px"},{header:t(()=>[y("div",null,te(e.title),1)]),footer:t(()=>[y("span",be,[u(r,{onClick:e.handleCancel,size:"default"},{default:t(()=>[Ce]),_:1},8,["onClick"]),u(r,{type:"primary",onClick:e.submitForm,size:"default"},{default:t(()=>[Ve]),_:1},8,["onClick"])])]),default:t(()=>[Ee,u(E,{model:e.ruleForm,ref:"formRef",rules:e.rules,size:"default","label-width":"120px"},{default:t(()=>[u(s,{label:"\u8BBE\u5907ID",prop:"deviceId"},{default:t(()=>[u(B,{modelValue:e.ruleForm.deviceId,"onUpdate:modelValue":a[3]||(a[3]=o=>e.ruleForm.deviceId=o),placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907ID"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[u(L,{modelValue:e.ruleForm.status,"onUpdate:modelValue":a[4]||(a[4]=o=>e.ruleForm.status=o)},{default:t(()=>[u(R,{label:"1"},{default:t(()=>[De]),_:1})]),_:1},8,["modelValue"])]),_:1}),u(s,{label:"\u8D85\u65F6\u65F6\u95F4",prop:"timeOut"},{default:t(()=>[u(B,{modelValue:e.ruleForm.timeOut,"onUpdate:modelValue":a[5]||(a[5]=o=>e.ruleForm.timeOut=o),placeholder:"\u8BF7\u8F93\u5165\u8D85\u65F6\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u4E0A\u7EBF\u65F6\u95F4",prop:"upTime"},{default:t(()=>[u(B,{modelValue:e.ruleForm.upTime,"onUpdate:modelValue":a[6]||(a[6]=o=>e.ruleForm.upTime=o),placeholder:"\u8BF7\u8F93\u5165\u4E0A\u7EBF\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u79BB\u7EBF\u65F6\u95F4",prop:"downTime"},{default:t(()=>[u(B,{modelValue:e.ruleForm.downTime,"onUpdate:modelValue":a[7]||(a[7]=o=>e.ruleForm.downTime=o),placeholder:"\u8BF7\u8F93\u5165\u79BB\u7EBF\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),u(s,{label:"\u6700\u65B0\u4E00\u6B21\u6570\u636E\u66F4\u65B0\u65F6\u95F4",prop:"lastDataUpdateTime"},{default:t(()=>[u(B,{modelValue:e.ruleForm.lastDataUpdateTime,"onUpdate:modelValue":a[8]||(a[8]=o=>e.ruleForm.lastDataUpdateTime=o),placeholder:"\u8BF7\u8F93\u5165\u6700\u65B0\u4E00\u6B21\u6570\u636E\u66F4\u65B0\u65F6\u95F4"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}var Te=ae(me,[["render",ye]]);export{Te as default};
