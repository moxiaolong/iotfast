var k=Object.defineProperty;var g=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var V=(e,l,a)=>l in e?k(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,h=(e,l)=>{for(var a in l||(l={}))w.call(l,a)&&V(e,a,l[a]);if(g)for(var a of g(l))U.call(l,a)&&V(e,a,l[a]);return e};import{s as F,_ as $,E as v}from"./index.1658457169439.js";import{h as L}from"./common.1658457169439.js";import{j,a as z,$ as T,ac as O,l as B,V as t,O as u,u as R,_ as d,k as N,m as y,T as A,U as E,S as M}from"./vue.1658457169439.js";function P(e){return F({url:"/api/v1/system/dept/list",method:"get",params:e})}function q(e){return F({url:"/api/v1/system/dept/add",method:"post",data:e})}function x(e){return F({url:"/api/v1/system/dept/edit",method:"put",data:e})}function te(e){return F({url:"/api/v1/system/dept/delete",method:"delete",data:{id:e}})}const W=j({name:"systemEditDept",setup(e,{emit:l}){const a=z(null),s=T({isShowDialog:!1,ruleForm:{deptId:0,parentId:0,deptName:"",orderNum:0,leader:"",phone:"",email:"",status:1},deptData:[],rules:{deptName:[{required:!0,message:"\u90E8\u95E8\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),_=r=>{m(),P().then(i=>{var f;s.deptData=L((f=i.data.deptList)!=null?f:[],"deptId","parentId")}),r&&typeof r=="object"?s.ruleForm=r:r&&typeof r=="number"&&(s.ruleForm.parentId=r),s.isShowDialog=!0},p=()=>{s.isShowDialog=!1},c=()=>{p()},n=()=>{const r=R(a);!r||r.validate(i=>{i&&(s.ruleForm.deptId===0?q(s.ruleForm).then(()=>{v.success("\u89D2\u8272\u6DFB\u52A0\u6210\u529F"),p(),l("deptList")}):x(s.ruleForm).then(()=>{v.success("\u89D2\u8272\u4FEE\u6539\u6210\u529F"),p(),l("deptList")}))})},m=()=>{s.ruleForm={deptId:0,parentId:0,deptName:"",orderNum:0,leader:"",phone:"",email:"",status:1}};return h({openDialog:_,closeDialog:p,onCancel:c,onSubmit:n,formRef:a},O(s))}}),G={class:"system-edit-dept-container"},H={key:0},J={class:"dialog-footer"},K=A("\u53D6 \u6D88");function Q(e,l,a,s,_,p){const c=d("el-cascader"),n=d("el-form-item"),m=d("el-col"),r=d("el-input"),i=d("el-input-number"),f=d("el-switch"),I=d("el-row"),S=d("el-form"),D=d("el-button"),C=d("el-dialog");return N(),B("div",G,[t(C,{title:(e.ruleForm.deptId!==0?"\u4FEE\u6539":"\u6DFB\u52A0")+"\u90E8\u95E8",modelValue:e.isShowDialog,"onUpdate:modelValue":l[7]||(l[7]=o=>e.isShowDialog=o),width:"769px"},{footer:u(()=>[y("span",J,[t(D,{onClick:e.onCancel,size:"default"},{default:u(()=>[K]),_:1},8,["onClick"]),t(D,{type:"primary",onClick:e.onSubmit,size:"default"},{default:u(()=>[A(E(e.ruleForm.deptId!==0?"\u4FEE \u6539":"\u6DFB \u52A0"),1)]),_:1},8,["onClick"])])]),default:u(()=>[t(S,{ref:"formRef",model:e.ruleForm,rules:e.rules,size:"default","label-width":"90px"},{default:u(()=>[t(I,{gutter:35},{default:u(()=>[t(m,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:u(()=>[t(n,{label:"\u4E0A\u7EA7\u90E8\u95E8"},{default:u(()=>[t(c,{options:e.deptData,props:{checkStrictly:!0,emitPath:!1,value:"deptId",label:"deptName"},placeholder:"\u8BF7\u9009\u62E9\u90E8\u95E8",clearable:"",class:"w100",modelValue:e.ruleForm.parentId,"onUpdate:modelValue":l[0]||(l[0]=o=>e.ruleForm.parentId=o)},{default:u(({node:o,data:b})=>[y("span",null,E(b.deptName),1),o.isLeaf?M("",!0):(N(),B("span",H," ("+E(b.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1}),t(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[t(n,{label:"\u90E8\u95E8\u540D\u79F0",prop:"deptName"},{default:u(()=>[t(r,{modelValue:e.ruleForm.deptName,"onUpdate:modelValue":l[1]||(l[1]=o=>e.ruleForm.deptName=o),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[t(n,{label:"\u8D1F\u8D23\u4EBA"},{default:u(()=>[t(r,{modelValue:e.ruleForm.leader,"onUpdate:modelValue":l[2]||(l[2]=o=>e.ruleForm.leader=o),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[t(n,{label:"\u624B\u673A\u53F7"},{default:u(()=>[t(r,{modelValue:e.ruleForm.phone,"onUpdate:modelValue":l[3]||(l[3]=o=>e.ruleForm.phone=o),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[t(n,{label:"\u90AE\u7BB1"},{default:u(()=>[t(r,{modelValue:e.ruleForm.email,"onUpdate:modelValue":l[4]||(l[4]=o=>e.ruleForm.email=o),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[t(n,{label:"\u6392\u5E8F"},{default:u(()=>[t(i,{modelValue:e.ruleForm.orderNum,"onUpdate:modelValue":l[5]||(l[5]=o=>e.ruleForm.orderNum=o),min:0,max:999,"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),t(m,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:u(()=>[t(n,{label:"\u90E8\u95E8\u72B6\u6001"},{default:u(()=>[t(f,{modelValue:e.ruleForm.status,"onUpdate:modelValue":l[6]||(l[6]=o=>e.ruleForm.status=o),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"\u542F","inactive-text":"\u7981"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}var X=$(W,[["render",Q]]),ue=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{X as E,te as d,ue as e,P as g};
