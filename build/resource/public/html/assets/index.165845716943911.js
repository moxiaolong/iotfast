var R=Object.defineProperty;var k=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var w=(e,t,a)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,A=(e,t)=>{for(var a in t||(t={}))$.call(t,a)&&w(e,a,t[a]);if(k)for(var a of k(t))L.call(t,a)&&w(e,a,t[a]);return e};import{j as K,a as M,aE as T,$ as I,d as j,ac as O,l as H,V as l,O as o,P,M as J,Q as W,_ as n,a6 as X,k as V,m as b,a5 as q,U as Y,c as Z,T as r}from"./vue.1658457169439.js";import{l as x,g as ee,u as le,a as ae,d as oe}from"./deviceGroup.1658457169439.js";import{_ as te,E as _,L as ne}from"./index.1658457169439.js";const ue=K({components:{},name:"DeviceGroup",setup(){const{proxy:e}=Z();M(null);const t=T(),a=I({loading:!0,ids:[],single:!0,multiple:!0,total:0,deviceGroupList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,name:void 0,id:void 0},ruleForm:{},rules:{name:[{required:!0,message:"\u7EC4\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),c=()=>{a.loading=!0,x(a.queryParams).then(u=>{a.deviceGroupList=u.data.list,a.total=u.data.total,a.loading=!1})},B=()=>{a.open=!1,p()},g=()=>{a.queryParams={pageNum:1,pageSize:10,name:void 0,id:void 0}},p=()=>{a.ruleForm={id:void 0,name:void 0,createdAt:void 0,updatedAt:void 0},g()},m=()=>{a.queryParams.pageNum=1,c()},C=()=>{g(),m()},f=u=>{a.ids=u.map(s=>s.id),a.single=u.length!=1,a.multiple=!u.length},i=()=>{p(),a.open=!0,a.title="\u6DFB\u52A0\u8BBE\u5907\u5206\u7EC4"},E=u=>{p();const s=u.id||a.ids;ee(s).then(F=>{let D=F.data;a.ruleForm=D,a.open=!0,a.title="\u4FEE\u6539\u8BBE\u5907\u5206\u7EC4"})},h=()=>{e.$refs.formRef.validate(u=>{u&&(a.ruleForm.id!=null?le(a.ruleForm).then(s=>{s.code===0?(_.success("\u4FEE\u6539\u6210\u529F"),a.open=!1,c()):_.error(s.msg)}):ae(a.ruleForm).then(s=>{s.code===0?(_.success("\u65B0\u589E\u6210\u529F"),a.open=!1,c()):_.error(s.msg)}))})},v=u=>{const s=u.id||a.ids;ne.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u8BBE\u5907\u5206\u7EC4\u7F16\u53F7\u4E3A"'+s+'"\u7684\u6570\u636E\u9879?',"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return oe(s)}).then(()=>{c(),_.success("\u5220\u9664\u6210\u529F")}).catch(function(){})};return j(()=>{a.queryParams.id=t.currentRoute.value.query.id,c()}),A({router:t,resetQueryParam:g,handleGetList:c,handleCancel:B,handleReset:p,handleQuery:m,resetQuery:C,handleSelectionChange:f,handleAdd:i,handleUpdate:E,submitForm:h,handleDelete:v},O(a))}}),se={class:"app-container"},de={class:"deviceGroup-search mb15"},ie=r(" \u67E5\u8BE2 "),re=r(" \u91CD\u7F6E "),pe=r(" \u65B0\u589E "),me=r(" \u4FEE\u6539 "),ce=r(" \u5220\u9664 "),fe=r("\u4FEE\u6539 "),_e=r("\u5220\u9664 "),ge={class:"dialog-footer"},he=r("\u53D6 \u6D88"),ye=r("\u786E \u5B9A");function Ce(e,t,a,c,B,g){const p=n("el-input"),m=n("el-form-item"),C=n("ele-Search"),f=n("el-icon"),i=n("el-button"),E=n("ele-Refresh"),h=n("el-form"),v=n("ele-FolderAdd"),u=n("el-col"),s=n("ele-Edit"),F=n("ele-Delete"),D=n("el-row"),G=n("el-card"),y=n("el-table-column"),S=n("el-table"),z=n("pagination"),U=n("el-dialog"),N=X("loading");return V(),H("div",se,[l(G,{shadow:"hover"},{default:o(()=>[b("div",de,[l(h,{inline:!0,size:"default","label-width":"68px"},{default:o(()=>[l(m,{label:"\u7EC4\u540D",prop:"name"},{default:o(()=>[l(p,{modelValue:e.queryParams.name,"onUpdate:modelValue":t[0]||(t[0]=d=>e.queryParams.name=d),placeholder:"\u8BF7\u8F93\u5165\u7EC4\u540D",clearable:"",onKeyup:q(e.handleQuery,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),l(m,{label:"Id",prop:"id"},{default:o(()=>[l(p,{modelValue:e.queryParams.id,"onUpdate:modelValue":t[1]||(t[1]=d=>e.queryParams.id=d),placeholder:"\u8BF7\u8F93\u5165Id",clearable:"",onKeyup:q(e.handleQuery,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),l(m,null,{default:o(()=>[l(i,{type:"primary",onClick:e.handleQuery},{default:o(()=>[l(f,null,{default:o(()=>[l(C)]),_:1}),ie]),_:1},8,["onClick"])]),_:1}),l(m,{style:{"vertical-align":"top"}},{default:o(()=>[l(i,{onClick:e.resetQuery},{default:o(()=>[l(f,null,{default:o(()=>[l(E)]),_:1}),re]),_:1},8,["onClick"])]),_:1})]),_:1}),l(D,{gutter:10,class:"mb8"},{default:o(()=>[l(u,{span:1.5},{default:o(()=>[l(i,{type:"primary",onClick:e.handleAdd},{default:o(()=>[l(f,null,{default:o(()=>[l(v)]),_:1}),pe]),_:1},8,["onClick"])]),_:1},8,["span"]),l(u,{span:1.5},{default:o(()=>[l(i,{type:"success",disabled:e.single,onClick:e.handleUpdate},{default:o(()=>[l(f,null,{default:o(()=>[l(s)]),_:1}),me]),_:1},8,["disabled","onClick"])]),_:1},8,["span"]),l(u,{span:1.5},{default:o(()=>[l(i,{type:"danger",disabled:e.multiple,onClick:e.handleDelete},{default:o(()=>[l(f,null,{default:o(()=>[l(F)]),_:1}),ce]),_:1},8,["disabled","onClick"])]),_:1},8,["span"])]),_:1})])]),_:1}),P((V(),J(S,{data:e.deviceGroupList,onSelectionChange:e.handleSelectionChange,style:{width:"100%"}},{default:o(()=>[l(y,{type:"selection",width:"55",align:"center"}),l(y,{label:"\u7EC4\u540D",align:"center",prop:"name"}),l(y,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createdAt",width:"180"}),l(y,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:o(d=>[l(i,{type:"text",class:"no_padding",size:"small",onClick:Q=>e.handleUpdate(d.row)},{default:o(()=>[fe]),_:2},1032,["onClick"]),l(i,{type:"text",class:"no_padding",size:"small",onClick:Q=>e.handleDelete(d.row)},{default:o(()=>[_e]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[N,e.loading]]),P(l(z,{total:e.total,page:e.queryParams.pageNum,"onUpdate:page":t[2]||(t[2]=d=>e.queryParams.pageNum=d),limit:e.queryParams.pageSize,"onUpdate:limit":t[3]||(t[3]=d=>e.queryParams.pageSize=d),onPagination:e.deviceGroupList},null,8,["total","page","limit","onPagination"]),[[W,e.total>0]]),l(U,{title:e.title,modelValue:e.open,"onUpdate:modelValue":t[5]||(t[5]=d=>e.open=d),width:"769px"},{header:o(()=>[b("div",null,Y(e.title),1)]),footer:o(()=>[b("span",ge,[l(i,{onClick:e.handleCancel,size:"default"},{default:o(()=>[he]),_:1},8,["onClick"]),l(i,{type:"primary",onClick:e.submitForm,size:"default"},{default:o(()=>[ye]),_:1},8,["onClick"])])]),default:o(()=>[l(h,{model:e.ruleForm,ref:"formRef",rules:e.rules,size:"default","label-width":"120px"},{default:o(()=>[l(m,{label:"\u7EC4\u540D",prop:"name"},{default:o(()=>[l(p,{modelValue:e.ruleForm.name,"onUpdate:modelValue":t[4]||(t[4]=d=>e.ruleForm.name=d),placeholder:"\u8BF7\u8F93\u5165\u7EC4\u540D"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}var be=te(ue,[["render",Ce]]);export{be as default};
