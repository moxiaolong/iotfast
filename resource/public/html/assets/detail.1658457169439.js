var w=Object.defineProperty;var C=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var D=(t,u,i)=>u in t?w(t,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[u]=i,A=(t,u)=>{for(var i in u||(u={}))M.call(u,i)&&D(t,i,u[i]);if(C)for(var i of C(u))N.call(u,i)&&D(t,i,u[i]);return t};import{j as V,a as T,aE as $,$ as q,d as S,ac as z,l as y,V as a,O as e,az as P,aA as x,_,a6 as G,k as g,T as m,U as d,P as H,M as R,m as o,F as U,a3 as j}from"./vue.1658457169439.js";import{g as O}from"./deviceInfo.1658457169439.js";import{b as J}from"./deviceCategoryData.1658457169439.js";import{i as K}from"./common.1658457169439.js";import{_ as Q}from"./index.1658457169439.js";const W=V({components:{},name:"DeviceInfoDetail",setup(){const t=T(null),u=T(null),i=$(),s=q({loading:!0,deviceInfo:{},kindInfo:{},dataList:{},categoryList:[],title:"",tabsActiveName:"device_info",queryParams:{id:void 0,name:void 0,sn:void 0}}),L=l=>{let n=Math.floor(Math.random()*130+110),F=Math.floor(Math.random()*130+110),B=Math.floor(Math.random()*130+110);return"rgb("+n+","+F+","+B+")"},I=l=>{i.push({path:"/device/deviceInfo/history",query:{kindId:l.id,deviceId:s.deviceInfo.id,categoryId:l.id}})},r=l=>{if(s.dataList==null||s.dataList.length<=0)return"\u672A\u6CE8\u518C";if(s.dataList[l.mark]!=null&&s.dataList[l.mark].length>0){let n=[];return n=s.dataList[l.mark],n[0].data}return l.mark},E=l=>{if(s.dataList==null||s.dataList.length<=0)return"\u672A\u6CE8\u518C";if(s.dataList[l.mark]!=null&&s.dataList[l.mark].length>0){let n=[];return n=s.dataList[l.mark],n[0].time}return l.mark},b=()=>{s.categoryList==null||s.categoryList.length<=0?console.log("categoryList get failed:",s.categoryList):s.categoryList.forEach(function(l){let n=l.mark,F=[];J({categoryId:l.id,deviceId:s.deviceInfo.id,top:10}).then(B=>{B.data.Data.map(k=>{F.push(k)}),s.dataList[n]=F})}),s.loading=!1},p=()=>{s.loading=!0,s.queryParams.id=i.currentRoute.value.query.id;const l=s.queryParams.id;O(l).then(n=>{s.deviceInfo=n.data.info,s.kindInfo=n.data.kind,s.categoryList=n.data.categoryList,b()})},f=(l,n)=>{},h=l=>{let n=K(l,"");return n||(n="\u672A\u6CE8\u518C"),n};return S(()=>{p()}),A({tabRef:t,formRef:u,handleTabClick:f,randomRgb:L,handleHistory:I,categoryDataLastDataFormat:r,categoryDataLastTimeFormat:E,getDeviceLastData:b,timeFormat:h,handleGet:p},z(s))}}),c=t=>(P("data-v-72949ec5"),t=t(),x(),t),X={class:"device-detail-container"},Y=c(()=>o("div",{class:"amap-page-container"},null,-1)),Z=c(()=>o("div",{class:"cell-item"}," \u8BBE\u5907\u540D\u79F0 ",-1)),ee=c(()=>o("div",{class:"cell-item"}," SN ",-1)),te=c(()=>o("div",{class:"cell-item"}," \u521B\u5EFA\u65F6\u95F4 ",-1)),ae=c(()=>o("div",{class:"cell-item"}," \u6700\u8FD1\u66F4\u65B0\u65F6\u95F4 ",-1)),oe=c(()=>o("div",{class:"cell-item"}," \u8BBE\u5907\u5730\u5740 ",-1)),se=m(" \u4E91\u5357\u7701\u6606\u660E\u5E02\u76D8\u9F99\u533A "),le=c(()=>o("div",{class:"cell-item"}," \u8BBE\u5907\u5206\u7EC4 ",-1)),ne=m(" \u7B2C\u4E00\u7EC4 "),ue=c(()=>o("div",{class:"cell-item"}," \u7528\u6237\u540D ",-1)),ie=c(()=>o("div",{class:"cell-item"}," \u5BC6\u7801 ",-1)),de=c(()=>o("div",{class:"card-header"},[o("span",{class:"title"},"\u8BBE\u5907\u4FE1\u606F")],-1)),ce={class:"home-card-item flex"},re={class:"flex-margin flex w100"},_e={key:0,class:"flex-auto"},me=c(()=>o("span",{class:"font30"},[m("\u8BBE\u5907\u72B6\u6001\uFF1A"),o("i",{style:{color:"#6690F9","font-style":"normal"}},"\u5728\u7EBF")],-1)),fe={class:"mt20"},ve={key:1,class:"flex-auto"},pe=c(()=>o("span",{class:"font30"},[m("\u8BBE\u5907\u72B6\u6001\uFF1A"),o("i",{style:{color:"#FF6462","font-style":"normal"}},"\u79BB\u7EBF")],-1)),he={class:"mt20"},Fe={class:"card-header"},Be={class:"title"},ge={class:"home-card-item flex"},be={class:"flex-margin flex w100"},ye={class:"flex-auto"},Ee={class:"font30"},ke={class:"mt20"},Le={class:"history-card-item-icon flex",style:{background:"var(--next-color-success-lighter)"}},Ie=["onClick"];function Ce(t,u,i,s,L,I){const r=_("el-descriptions-item"),E=_("el-tag"),b=_("el-descriptions"),p=_("el-card"),f=_("el-tab-pane"),h=_("el-table-column"),l=_("el-table"),n=_("el-tabs"),F=_("el-col"),B=_("el-row"),k=G("loading");return g(),y("div",X,[Y,a(n,{modelValue:t.tabsActiveName,"onUpdate:modelValue":u[0]||(u[0]=v=>t.tabsActiveName=v),ref:"tabRef",onTabClick:t.handleTabClick,style:{"background-color":"#FFFFFF"}},{default:e(()=>[a(f,{label:"\u8BBE\u5907\u4FE1\u606F",name:"device_info"},{default:e(()=>[a(p,{shadow:"hover",class:"mt15"},{default:e(()=>[a(b,{class:"margin-top",title:"\u8BBE\u5907\u4FE1\u606F",column:3,size:"default",border:""},{default:e(()=>[a(r,null,{label:e(()=>[Z]),default:e(()=>[m(" "+d(t.deviceInfo.name),1)]),_:1}),a(r,null,{label:e(()=>[ee]),default:e(()=>[m(" "+d(t.deviceInfo.sn),1)]),_:1}),a(r,null,{label:e(()=>[te]),default:e(()=>[m(" "+d(t.deviceInfo.createdAt),1)]),_:1}),a(r,null,{label:e(()=>[ae]),default:e(()=>[a(E,{size:"small"},{default:e(()=>[m(d(t.deviceInfo.updatedAt),1)]),_:1})]),_:1}),a(r,null,{label:e(()=>[oe]),default:e(()=>[se]),_:1}),a(r,null,{label:e(()=>[le]),default:e(()=>[ne]),_:1})]),_:1})]),_:1}),a(p,{shadow:"hover",class:"mt15"},{default:e(()=>[a(b,{class:"margin-top",title:"\u8BBE\u5907\u914D\u7F6E",column:3,size:"default",border:""},{default:e(()=>[a(r,null,{label:e(()=>[ue]),default:e(()=>[m(" "+d(t.deviceInfo.sn),1)]),_:1}),a(r,null,{label:e(()=>[ie]),default:e(()=>[m(" "+d(t.deviceInfo.pwd),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(f,{label:"\u8BBE\u5907\u6A21\u578B",name:"device_model"},{default:e(()=>[a(p,{shadow:"hover",class:"mt15"},{default:e(()=>[a(n,{"model-value":"device_property"},{default:e(()=>[a(f,{label:"\u8BBE\u5907\u5C5E\u6027",name:"device_property"},{default:e(()=>[H((g(),R(l,{data:t.categoryList,border:"",style:{width:"100%"}},{default:e(()=>[a(h,{prop:"name",label:"\u540D\u79F0",width:"180"}),a(h,{prop:"mark",label:"\u6807\u8BB0"}),a(h,{prop:"dataType",label:"\u6570\u636E\u7C7B\u578B"}),a(h,{prop:"unit",label:"\u6570\u636E\u5355\u4F4D"}),a(h,{prop:"unit",label:"\u7CFB\u6570"}),a(h,{prop:"unit",label:"\u683C\u5F0F\u5316"})]),_:1},8,["data"])),[[k,t.loading]])]),_:1}),a(f,{label:"\u8BBE\u5907\u529F\u80FD",name:"device_function"}),a(f,{label:"\u8BBE\u5907\u4E8B\u4EF6",name:"device_events"})]),_:1})]),_:1})]),_:1}),a(f,{label:"\u8BBE\u5907\u72B6\u6001",name:"device_status"},{default:e(()=>[a(B,{gutter:20},{default:e(()=>[a(F,{xs:12,sm:12,lg:6},{default:e(()=>[a(p,{class:"box-card xx"},{header:e(()=>[de]),default:e(()=>[o("div",ce,[o("div",re,[t.deviceInfo.status?(g(),y("div",_e,[me,o("div",fe,"\u4E0A\u7EBF\u65F6\u95F4\uFF1A"+d(t.timeFormat(t.deviceInfo.upTime)),1)])):(g(),y("div",ve,[pe,o("div",he,"\u4E0A\u7EBF\u65F6\u95F4\uFF1A"+d(t.timeFormat(t.deviceInfo.downTime)),1)]))])])]),_:1})]),_:1})]),_:1})]),_:1}),a(f,{label:"\u8BBE\u5907\u6570\u636E",name:"device_data"},{default:e(()=>[a(B,{gutter:20},{default:e(()=>[(g(!0),y(U,null,j(t.categoryList,v=>(g(),R(F,{span:6,class:"mb15",key:v.id},{default:e(()=>[a(p,{class:"box-card"},{header:e(()=>[o("div",Fe,[o("span",Be,d(v.name)+"\u72B6\u6001",1)])]),default:e(()=>[o("div",ge,[o("div",be,[o("div",ye,[o("span",Ee,d(v.name)+" : "+d(t.categoryDataLastDataFormat(v))+" "+d(v.unit),1),o("div",ke,"\u66F4\u65B0\u65F6\u95F4\uFF1A"+d(t.categoryDataLastTimeFormat(v)),1)]),o("div",Le,[o("i",{class:"flex-margin font32 fa fa-line-chart",style:{color:"var(--el-color-success)"},onClick:De=>t.handleHistory(v)},null,8,Ie)])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","onTabClick"])])}var Ve=Q(W,[["render",Ce],["__scopeId","data-v-72949ec5"]]);export{Ve as default};
