var $=Object.defineProperty;var A=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var B=(e,n,s)=>n in e?$(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,w=(e,n)=>{for(var s in n||(n={}))Q.call(n,s)&&B(e,s,n[s]);if(A)for(var s of A(n))W.call(n,s)&&B(e,s,n[s]);return e};import"./wordCloud.1658457169439.js";import{j as K,a as O,aE as G,$ as M,d as H,ac as Z,l as j,V as a,O as o,n as J,_ as u,a6 as X,k,m as d,a5 as L,U as b,J as f,M as N,S as Y,P as S,Q as x,c as ee,T as v}from"./vue.1658457169439.js";import{c as ae,d as te}from"./deviceCategoryData.1658457169439.js";import{g as oe}from"./deviceCategoty.1658457169439.js";import ne from"./echart_line.1658457169439.js";import{_ as le,L as V,E as ue}from"./index.1658457169439.js";import"./echarts.16584571694392.js";import"./echarts.1658457169439.js";const re=K({components:{EchartLines:ne},name:"DeviceCategoryData",setup(){const{proxy:e}=ee(),n=O(null),s=G(),t=M({loading:!0,ids:[],single:!0,multiple:!0,total:0,chartStatus:!1,deviceCategory:{},deviceDataList:[],tabsActiveName:"history_mark",title:"",queryParams:{pageNum:1,pageSize:10,categoryId:void 0,deviceId:void 0},echarLineOptions:{},echarLineHeight:400,echarLineWidth:800}),C=()=>{const l=e.$refs.tabRef;t.echarLineWidth=l.$el.offsetWidth},F=l=>{let r=[],g=[];l.map(c=>{r.push(c.data),g.push(c.time)});const q={title:{text:t.deviceCategory.name+"\u5386\u53F2\u6570\u636E\u6298\u7EBF\u56FE"},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{},dataView:{}}},tooltip:{trigger:"axis",position:function(c){return[c[0],"10%"]}},xAxis:{type:"time",boundaryGap:!1,data:g},yAxis:{type:"value",boundaryGap:[0,"100%"]},dataZoom:[{type:"inside",start:0,end:20},{start:0,end:20}],series:[{data:r,type:"line",smooth:!0,symbol:"none"}]};t.echarLineOptions=q},m=()=>{t.loading=!0;let l={pageNum:t.queryParams.pageNum>1?t.queryParams.pageNum:0,pageSize:10,categoryId:t.queryParams.categoryId,deviceId:t.queryParams.deviceId};ae(l).then(r=>{t.deviceDataList=r.data.Data,t.total=r.data.total,t.loading=!1,F(r.data.Data)})},y=l=>{t.ids=l.map(r=>r.id),t.single=l.length!=1,t.multiple=!l.length},E=l=>l.data+t.deviceCategory.unit,_=()=>{oe(t.queryParams.categoryId).then(l=>{t.deviceCategory=l.data})},p=()=>{t.queryParams.pageNum=1,t.queryParams.pageSize=10,m()},D=()=>{t.queryParams.pageNum=0,t.queryParams.pageSize=0,p()},I=(l,r)=>{C()},P=l=>{const r=l.id||t.ids;V.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u8BBE\u5907\u4FE1\u606F\u7F16\u53F7\u4E3A"'+r+'"\u7684\u6570\u636E\u9879?',"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return te(r)}).then(()=>{m(),ue.success("\u5220\u9664\u6210\u529F")}).catch(function(){})},h=()=>{J(()=>{})};return H(()=>{t.queryParams.deviceId=s.currentRoute.value.query.deviceId,t.queryParams.categoryId=s.currentRoute.value.query.categoryId,t.queryParams.deviceId==null||t.queryParams.deviceId.length<=0||t.queryParams.categoryId==null||t.queryParams.categoryId.length<=0?V.alert("\u53C2\u6570\u9519\u8BEF\uFF01","\u63D0\u793A",{}):(_(),m(),h())}),w({tabRef:n,handleCalcEchart:C,handleEchartUpdate:F,handleTabClick:I,handleDelete:P,handleSelectionChange:y,DeviceDataFormat:E,handleGetCategory:_,handleGetList:m,handleQuery:p,resetQuery:D},Z(t))}}),se={class:"app-container"},ie={class:"deviceCategoryData-search mb15"},de=v(" \u67E5\u8BE2 "),ce=v(" \u91CD\u7F6E "),me=v(" \u5220\u9664"),pe={class:"countup-card-item-flex",ref:"topCardItemRefs"},ye={class:"countup-card-item-title font30"},_e={class:"countup-card-item-flex",ref:"topCardItemRefs"},he={class:"countup-card-item-title font30"},ge={class:"countup-card-item-flex",ref:"topCardItemRefs"},fe={class:"countup-card-item-title font30"},ve=v("\u603B\u6570\uFF1A"),be=v("\u5220\u9664");function Ce(e,n,s,t,C,F){const m=u("el-input"),y=u("el-form-item"),E=u("ele-Search"),_=u("el-icon"),p=u("el-button"),D=u("ele-Refresh"),I=u("el-form"),P=u("ele-Delete"),h=u("el-col"),l=u("el-row"),r=u("el-card"),g=u("el-tab-pane"),q=u("EchartLines"),c=u("el-table-column"),R=u("el-table"),z=u("pagination"),T=u("el-tabs"),U=X("loading");return k(),j("div",se,[a(r,{shadow:"hover"},{default:o(()=>[d("div",ie,[a(I,{inline:!0,size:"default"},{default:o(()=>[a(y,{label:"\u8BBE\u5907id",prop:"deviceId"},{default:o(()=>[a(m,{modelValue:e.queryParams.deviceId,"onUpdate:modelValue":n[0]||(n[0]=i=>e.queryParams.deviceId=i),placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907id",readonly:"true",clearable:"",onKeyup:L(e.handleQuery,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),a(y,{label:"\u4EA7\u54C1\u6A21\u677Fid",prop:"categoryId"},{default:o(()=>[a(m,{modelValue:e.queryParams.categoryId,"onUpdate:modelValue":n[1]||(n[1]=i=>e.queryParams.categoryId=i),placeholder:"\u4EA7\u54C1\u6A21\u677Fid",readonly:"true",clearable:"",onKeyup:L(e.handleQuery,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),a(y,null,{default:o(()=>[a(p,{type:"primary",onClick:e.handleQuery},{default:o(()=>[a(_,null,{default:o(()=>[a(E)]),_:1}),de]),_:1},8,["onClick"])]),_:1}),a(y,{style:{"vertical-align":"top"}},{default:o(()=>[a(p,{onClick:e.resetQuery},{default:o(()=>[a(_,null,{default:o(()=>[a(D)]),_:1}),ce]),_:1},8,["onClick"])]),_:1})]),_:1}),a(l,{gutter:10,class:"mb8"},{default:o(()=>[a(h,{span:1.5},{default:o(()=>[a(p,{type:"danger",disabled:e.multiple,onClick:e.handleDelete},{default:o(()=>[a(_,null,{default:o(()=>[a(P)]),_:1}),me]),_:1},8,["disabled","onClick"])]),_:1},8,["span"])]),_:1})]),a(T,{modelValue:e.tabsActiveName,"onUpdate:modelValue":n[4]||(n[4]=i=>e.tabsActiveName=i),ref:"tabRef",onTabClick:e.handleTabClick},{default:o(()=>[a(g,{label:"\u5386\u53F2\u6570\u636E\u4FE1\u606F",name:"history_mark"},{default:o(()=>[a(r,{shadow:"hover"},{default:o(()=>[a(l,{gutter:20},{default:o(()=>[a(h,{sm:6,class:"mb15"},{default:o(()=>[d("div",{class:"countup-card-item countup-card-item-box",style:f({background:"var(--el-color-primary)"})},[d("div",pe,[d("div",ye,"\u5C5E\u6027\uFF1A"+b(e.deviceCategory.name),1)],512)],4)]),_:1}),a(h,{sm:6,class:"mb15"},{default:o(()=>[d("div",{class:"countup-card-item countup-card-item-box",style:f({background:"var(--el-color-success)"})},[d("div",_e,[d("div",he,"\u5355\u4F4D\uFF1A"+b(e.deviceCategory.unit),1)],512)],4)]),_:1}),a(h,{sm:6,class:"mb15"},{default:o(()=>[d("div",{class:"countup-card-item countup-card-item-box",style:f({background:"var(--el-color-warning)"})},[d("div",ge,[d("div",fe,[ve,d("span",null,b(e.total),1)])],512)],4)]),_:1})]),_:1})]),_:1})]),_:1}),a(g,{label:"\u5386\u53F2\u6570\u636E\u6298\u7EBF\u56FE",name:"history_chart"},{default:o(()=>[d("div",{id:"echart_line_show_container",class:"echart_line_show_container",style:f({width:e.echarLineWidth+"px",height:"405px"})},[e.tabsActiveName==="history_chart"?(k(),N(q,{key:0,style:f({width:e.echarLineWidth+"px",height:"405px"}),width:e.echarLineWidth,options:e.echarLineOptions},null,8,["style","width","options"])):Y("",!0)],4)]),_:1}),a(g,{label:"\u5386\u53F2\u6570\u636E\u5217\u8868",name:"history_tab"},{default:o(()=>[S((k(),N(R,{data:e.deviceDataList,onSelectionChange:e.handleSelectionChange},{default:o(()=>[a(c,{type:"selection",width:"55",align:"center"}),a(c,{label:e.deviceCategory.name,align:"center",prop:"data"},{default:o(i=>[d("div",null,b(e.DeviceDataFormat(i.row)),1)]),_:1},8,["label"]),a(c,{label:"\u65F6\u95F4",align:"center",prop:"time"}),a(c,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:o(i=>[a(p,{type:"text",class:"no_padding",size:"small",onClick:Fe=>e.handleDelete(i.row)},{default:o(()=>[be]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[U,e.loading]]),S(a(z,{total:e.total,page:e.queryParams.pageNum,"onUpdate:page":n[2]||(n[2]=i=>e.queryParams.pageNum=i),limit:e.queryParams.pageSize,"onUpdate:limit":n[3]||(n[3]=i=>e.queryParams.pageSize=i),onPagination:e.deviceDataList},null,8,["total","page","limit","onPagination"]),[[x,e.total>0]])]),_:1})]),_:1},8,["modelValue","onTabClick"])]),_:1})])}var Le=le(re,[["render",Ce],["__scopeId","data-v-c3865306"]]);export{Le as default};
