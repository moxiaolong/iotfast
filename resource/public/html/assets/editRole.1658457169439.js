var S=Object.defineProperty;var F=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var V=(e,l,t)=>l in e?S(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,v=(e,l)=>{for(var t in l||(l={}))w.call(l,t)&&V(e,t,l[t]);if(F)for(var t of F(l))A.call(l,t)&&V(e,t,l[t]);return e};import{s as g,_ as B,E,a0 as N}from"./index.1658457169439.js";import{h as T}from"./common.1658457169439.js";import{j as U,a as R,$ as I,ac as O,l as x,V as a,O as o,u as M,_ as d,k as $,m as K,T as D,U as P}from"./vue.1658457169439.js";function ue(e){return g({url:"/api/v1/system/role/list",method:"get",params:e})}function z(){return g({url:"/api/v1/system/role/getParams",method:"get"})}function L(e){return g({url:"/api/v1/system/role/add",method:"post",data:e})}function j(e){return g({url:"/api/v1/system/role/get",method:"get",params:{id:e}})}function q(e){return g({url:"/api/v1/system/role/edit",method:"put",data:e})}const H=U({name:"systemEditRole",setup(){const e=R(null),l=R(),t=I({loading:!1,isShowDialog:!1,formData:{id:0,name:"",status:1,listOrder:0,remark:"",menuIds:[]},rules:{name:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},menuData:[],menuExpand:!1,menuNodeAll:!1,menuCheckStrictly:!1,menuProps:{children:"children",label:"title"}}),y=n=>{r(),i(),n&&j(n.id).then(s=>{var m;s.data.role&&(t.formData=s.data.role,t.formData.menuIds=(m=s.data.menuIds)!=null?m:[])}),t.isShowDialog=!0},p=()=>{t.isShowDialog=!1},b=()=>{p()},h=()=>{const n=M(e);!n||n.validate(s=>{s&&(t.loading=!0,t.formData.menuIds=C(),t.formData.id===0?L(t.formData).then(()=>{E.success("\u89D2\u8272\u6DFB\u52A0\u6210\u529F"),p(),f(),emit("getRoleList")}).finally(()=>{t.loading=!1}):q(t.formData).then(()=>{E.success("\u89D2\u8272\u4FEE\u6539\u6210\u529F"),p(),f(),emit("getRoleList")}).finally(()=>{t.loading=!1}))})},i=()=>{z().then(n=>{t.menuData=T(n.data.menu,"id","pid")})},r=()=>{t.menuCheckStrictly=!1,t.menuExpand=!1,t.menuNodeAll=!1,t.formData={id:0,name:"",status:1,listOrder:0,remark:"",menuIds:[]}},_=n=>{let s=t.menuData;for(let m=0;m<s.length;m++)l.value.store.nodesMap[s[m].id].expanded=n},k=n=>{l.value.setCheckedNodes(n?t.menuData:[])},c=n=>{t.menuCheckStrictly=!!n};function C(){let n=l.value.getCheckedKeys(),s=l.value.getHalfCheckedKeys();return n.unshift.apply(n,s),n}const f=()=>{N()};return v({openDialog:y,closeDialog:p,onCancel:b,onSubmit:h,menuRef:l,formRef:e,handleCheckedTreeExpand:_,handleCheckedTreeNodeAll:k,handleCheckedTreeConnect:c,resetMenuSession:f},O(t))}}),W={class:"system-edit-role-container"},G=D("\u5C55\u5F00/\u6298\u53E0"),J=D("\u5168\u9009/\u5168\u4E0D\u9009"),Q=D("\u7236\u5B50\u8054\u52A8"),X={class:"dialog-footer"},Y=D("\u53D6 \u6D88");function Z(e,l,t,y,p,b){const h=d("el-input"),i=d("el-form-item"),r=d("el-col"),_=d("el-input-number"),k=d("el-switch"),c=d("el-checkbox"),C=d("el-tree"),f=d("el-row"),n=d("el-form"),s=d("el-button"),m=d("el-dialog");return $(),x("div",W,[a(m,{title:(e.formData.id===0?"\u6DFB\u52A0":"\u4FEE\u6539")+"\u89D2\u8272",modelValue:e.isShowDialog,"onUpdate:modelValue":l[10]||(l[10]=u=>e.isShowDialog=u),width:"769px"},{footer:o(()=>[K("span",X,[a(s,{onClick:e.onCancel,size:"default"},{default:o(()=>[Y]),_:1},8,["onClick"]),a(s,{type:"primary",onClick:e.onSubmit,size:"default",loading:e.loading},{default:o(()=>[D(P(e.formData.id===0?"\u65B0 \u589E":"\u4FEE \u6539"),1)]),_:1},8,["onClick","loading"])])]),default:o(()=>[a(n,{ref:"formRef",model:e.formData,rules:e.rules,size:"default","label-width":"90px"},{default:o(()=>[a(f,{gutter:35},{default:o(()=>[a(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[a(i,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:o(()=>[a(h,{modelValue:e.formData.name,"onUpdate:modelValue":l[0]||(l[0]=u=>e.formData.name=u),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[a(i,{label:"\u6392\u5E8F"},{default:o(()=>[a(_,{modelValue:e.formData.listOrder,"onUpdate:modelValue":l[1]||(l[1]=u=>e.formData.listOrder=u),min:0,"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[a(i,{label:"\u89D2\u8272\u72B6\u6001"},{default:o(()=>[a(k,{modelValue:e.formData.status,"onUpdate:modelValue":l[2]||(l[2]=u=>e.formData.status=u),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"\u542F","inactive-text":"\u7981"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[a(i,{label:"\u89D2\u8272\u63CF\u8FF0"},{default:o(()=>[a(h,{modelValue:e.formData.remark,"onUpdate:modelValue":l[3]||(l[3]=u=>e.formData.remark=u),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0",maxlength:"150"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[a(i,{label:"\u83DC\u5355\u6743\u9650"},{default:o(()=>[a(f,{gutter:35},{default:o(()=>[a(r,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[a(c,{modelValue:e.menuExpand,"onUpdate:modelValue":l[4]||(l[4]=u=>e.menuExpand=u),onChange:l[5]||(l[5]=u=>e.handleCheckedTreeExpand(u))},{default:o(()=>[G]),_:1},8,["modelValue"]),a(c,{modelValue:e.menuNodeAll,"onUpdate:modelValue":l[6]||(l[6]=u=>e.menuNodeAll=u),onChange:l[7]||(l[7]=u=>e.handleCheckedTreeNodeAll(u))},{default:o(()=>[J]),_:1},8,["modelValue"]),a(c,{modelValue:e.menuCheckStrictly,"onUpdate:modelValue":l[8]||(l[8]=u=>e.menuCheckStrictly=u),onChange:l[9]||(l[9]=u=>e.handleCheckedTreeConnect(u))},{default:o(()=>[Q]),_:1},8,["modelValue"])]),_:1}),a(r,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[a(C,{data:e.menuData,ref:"menuRef",props:e.menuProps,"default-checked-keys":e.formData.menuIds,"node-key":"id","show-checkbox":"",class:"menu-data-tree tree-border","check-strictly":!e.menuCheckStrictly},null,8,["data","props","default-checked-keys","check-strictly"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}var ee=B(H,[["render",Z],["__scopeId","data-v-6de0dac4"]]),ne=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{ee as E,ne as e,ue as g};
