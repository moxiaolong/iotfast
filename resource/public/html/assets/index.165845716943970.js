var z=Object.defineProperty;var w=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var C=(t,a,o)=>a in t?z(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,v=(t,a)=>{for(var o in a||(a={}))L.call(a,o)&&C(t,o,a[o]);if(w)for(var o of w(a))O.call(a,o)&&C(t,o,a[o]);return t};import{j as M,a as k,$ as T,d as U,ac as P,l as G,V as e,O as l,al as H,_ as n,k as F,m as j,M as y,P as Q,Q as q,T as p}from"./vue.1658457169439.js";import{E as I,g as J}from"./editRole.1658457169439.js";import K from"./addRole.1658457169439.js";import{_ as W,L as X,E as Y}from"./index.1658457169439.js";import"./common.1658457169439.js";const Z=M({name:"systemRole",components:{AddRole:K,EditRole:I},setup(){const t=k(),a=k(),o=T({tableData:{data:[],total:0,loading:!1,param:{roleName:"",roleStatus:"",pageNum:1,pageSize:10}}}),R=()=>{_()},_=()=>{const u=[];J(o.tableData.param).then(c=>{var D;((D=c.data.list)!=null?D:[]).map(d=>{u.push({id:d.id,status:d.status,listOrder:d.listOrder,name:d.name,remark:d.remark,dataScope:d.dataScope,createdAt:d.createdAt})}),o.tableData.data=u,o.tableData.total=c.data.total})},h=()=>{a.value.openDialog()},b=u=>{a.value.openDialog(H(u))},i=u=>{X.confirm(`\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u89D2\u8272\u540D\u79F0\uFF1A\u201C${u.roleName}\u201D\uFF0C\u662F\u5426\u7EE7\u7EED?`,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{deleteRole(u.id).then(()=>{Y.success("\u5220\u9664\u6210\u529F"),proxy.$refs.editRoleRef.resetMenuSession(),_()})}).catch(()=>{})},f=u=>{o.tableData.param.pageSize=u},g=u=>{o.tableData.param.pageNum=u};return U(()=>{R()}),v({addRoleRef:t,editRoleRef:a,onOpenAddRole:h,onOpenEditRole:b,onRowDel:i,onHandleSizeChange:f,onHandleCurrentChange:g,roleList:_},P(o))}}),x={class:"system-role-container"},ee={class:"system-user-search mb15"},te=p(" \u67E5\u8BE2 "),ae=p(" \u65B0\u589E\u89D2\u8272 "),oe=p("\u542F\u7528"),le=p("\u7981\u7528"),ne=p("\u4FEE\u6539"),ue=p("\u5220\u9664");function se(t,a,o,R,_,h){const b=n("el-input"),i=n("el-form-item"),f=n("el-option"),g=n("el-select"),u=n("ele-Search"),c=n("el-icon"),m=n("el-button"),D=n("ele-FolderAdd"),d=n("el-form"),r=n("el-table-column"),E=n("el-tag"),B=n("el-table"),A=n("pagination"),S=n("el-card"),N=n("AddRole"),V=n("EditRole");return F(),G("div",x,[e(S,{shadow:"hover"},{default:l(()=>[j("div",ee,[e(d,{inline:!0,size:"default"},{default:l(()=>[e(i,{label:"\u89D2\u8272\u540D\u79F0"},{default:l(()=>[e(b,{modelValue:t.tableData.param.roleName,"onUpdate:modelValue":a[0]||(a[0]=s=>t.tableData.param.roleName=s),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"\u72B6\u6001"},{default:l(()=>[e(g,{placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",modelValue:t.tableData.param.roleStatus,"onUpdate:modelValue":a[1]||(a[1]=s=>t.tableData.param.roleStatus=s),clearable:""},{default:l(()=>[e(f,{label:"\u542F\u7528",value:"1"}),e(f,{label:"\u7981\u7528",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:l(()=>[e(m,{type:"primary",onClick:t.roleList},{default:l(()=>[e(c,null,{default:l(()=>[e(u)]),_:1}),te]),_:1},8,["onClick"])]),_:1}),e(i,{style:{"vertical-align":"top"}},{default:l(()=>[e(m,{type:"success",onClick:t.onOpenAddRole},{default:l(()=>[e(c,null,{default:l(()=>[e(D)]),_:1}),ae]),_:1},8,["onClick"])]),_:1})]),_:1})]),e(B,{data:t.tableData.data,style:{width:"100%"}},{default:l(()=>[e(r,{type:"index",label:"\u5E8F\u53F7",width:"60"}),e(r,{prop:"name",label:"\u89D2\u8272\u540D\u79F0","show-overflow-tooltip":""}),e(r,{prop:"listOrder",label:"\u6392\u5E8F","show-overflow-tooltip":""}),e(r,{prop:"status",label:"\u89D2\u8272\u72B6\u6001","show-overflow-tooltip":""},{default:l(s=>[s.row.status===1?(F(),y(E,{key:0,type:"success"},{default:l(()=>[oe]),_:1})):(F(),y(E,{key:1,type:"info"},{default:l(()=>[le]),_:1}))]),_:1}),e(r,{prop:"remark",label:"\u89D2\u8272\u63CF\u8FF0","show-overflow-tooltip":""}),e(r,{prop:"createdAt",label:"\u521B\u5EFA\u65F6\u95F4","show-overflow-tooltip":""}),e(r,{label:"\u64CD\u4F5C",width:"100"},{default:l(s=>[e(m,{class:"no_padding",size:"small",type:"text",onClick:$=>t.onOpenEditRole(s.row)},{default:l(()=>[ne]),_:2},1032,["onClick"]),e(m,{class:"no_padding",size:"small",type:"text",onClick:$=>t.onRowDel(s.row)},{default:l(()=>[ue]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Q(e(A,{total:t.tableData.total,page:t.tableData.param.pageNum,"onUpdate:page":a[2]||(a[2]=s=>t.tableData.param.pageNum=s),limit:t.tableData.param.pageSize,"onUpdate:limit":a[3]||(a[3]=s=>t.tableData.param.pageSize=s),onPagination:t.roleList},null,8,["total","page","limit","onPagination"]),[[q,t.tableData.total>0]])]),_:1}),e(N,{ref:"addRoleRef"},null,512),e(V,{ref:"editRoleRef",onGetRoleList:t.roleList},null,8,["onGetRoleList"])])}var _e=W(Z,[["render",se]]);export{_e as default};
